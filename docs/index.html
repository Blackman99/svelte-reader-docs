<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		
		<link href="../_app/immutable/assets/0.703b3fda.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Link.0d396f12.css" rel="stylesheet">
		<link href="../_app/immutable/assets/ReloadPrompt.6625b86a.css" rel="stylesheet">
		<link href="../_app/immutable/assets/3.6eaba827.css" rel="stylesheet">
		<link href="../_app/immutable/assets/CopyCode.1ce69506.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.3cc09048.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.0543d4e7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.3f476902.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.00eba1c1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.a6e8ca2b.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.e5411902.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.68b6889f.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/0.544e78d9.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Link.svelte_svelte_type_style_lang.59f875cc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Link.f52f8ba1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.28599584.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/3.0f6196c0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/3.04522a5e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CopyCode.svelte_svelte_type_style_lang.b2cef5a1.js"><title>svelte-reader</title><!-- HEAD_svelte-1pnpowe_START --><meta id="theme-color" name="theme-color" content="#fff"><!-- HTML_TAG_START -->
<script>
  const themeColor = JSON.parse('{"light":"#fff","dark":"#000"}')
  if (window.localStorage.getItem('SVELTEPRESS_DARK_MODE') === 'on') {
    document.querySelector('html').classList.add('dark')
    document.getElementById('theme-color').setAttribute('content', themeColor ? themeColor.dark : '#ffffff')
  } else {
    document.querySelector('html').classList.remove('dark')
    document.getElementById('theme-color').setAttribute('content', themeColor ? themeColor.light : '#ffffff')
  }
</script><!-- HTML_TAG_END --><!-- HEAD_svelte-1pnpowe_END --><!-- HEAD_svelte-yuwj80_START --><meta name="description" content=" "><!-- HEAD_svelte-yuwj80_END --><!-- HEAD_svelte-ntf23x_START --><!-- HEAD_svelte-ntf23x_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">   <main class="svelte-tkaw86"><div class="ajax-bar svelte-1l1j860" style="--ajax-bar-width: 0%;"><div class="progress svelte-1l1j860"></div> </div> <aside class="theme-default-sidebar svelte-1j2stt8 collapsed"><div class="sidebar-logo svelte-1j2stt8"><a href="/svelte-reader-docs" class="nav-item  svelte-1w19khn" role="link" tabindex="0" aria-label="svelte-reader"></a> <div class="close svelte-1j2stt8" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" fillrule="evenodd" d="m7.116 8l-4.558 4.558l.884.884L8 8.884l4.558 4.558l.884-.884L8.884 8l4.558-4.558l-.884-.884L8 7.116L3.442 2.558l-.884.884L7.116 8z" cliprule="evenodd"></path></svg></div></div> </aside> <div class="backdrop svelte-112ytuk" role="none" style="z-index: 900;"></div> <header class="header svelte-wxxf5d"><div class="header-inner svelte-wxxf5d"><div class="left svelte-wxxf5d"><div class="nav-trigger svelte-6d3xbz" role="menu" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" strokelinecap="round" strokewidth="2"><path d="M5 5L19 19"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 5L19 19;M5 5L19 5"></animate></path><path d="M12 12H12" opacity="0"><animate fill="freeze" attributeName="d" begin="0.2s" dur="0.4s" values="M12 12H12;M5 12H19"></animate><set attributeName="opacity" begin="0.2s" to="1"></set></path><path d="M5 19L19 5"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 19L19 5;M5 19L19 19"></animate></path></g></svg></div>  </div>  <nav class="nav-links svelte-wxxf5d" aria-label="Menu"><div class="navbar-pc svelte-wxxf5d"> <div href="https://github.com/jinhuan138/svelte-reader" class="nav-item nav-item--icon svelte-1w19khn" target="_blank" role="link" tabindex="0" aria-label="Github"><svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"></path></svg></div>    <div class="toggle svelte-8qls77" aria-label="Toggle dark mode" role="button" tabindex="0"><svg width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" strokedasharray="2" strokedashoffset="2" strokelinecap="round" strokewidth="2"><path d="M0 0"><animate fill="freeze" attributeName="d" begin="1.2s" dur="0.2s" values="M12 19v1M19 12h1M12 5v-1M5 12h-1;M12 21v1M21 12h1M12 3v-1M3 12h-1"></animate><animate fill="freeze" attributeName="stroke-dashoffset" begin="1.2s" dur="0.2s" values="2;0"></animate></path><path d="M0 0"><animate fill="freeze" attributeName="d" begin="1.5s" dur="0.2s" values="M17 17l0.5 0.5M17 7l0.5 -0.5M7 7l-0.5 -0.5M7 17l-0.5 0.5;M18.5 18.5l0.5 0.5M18.5 5.5l0.5 -0.5M5.5 5.5l-0.5 -0.5M5.5 18.5l-0.5 0.5"></animate><animate fill="freeze" attributeName="stroke-dashoffset" begin="1.5s" dur="1.2s" values="2;0"></animate></path><animateTransform attributeName="transform" dur="30s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></g><g fill="currentColor"><path d="M15.22 6.03L17.75 4.09L14.56 4L13.5 1L12.44 4L9.25 4.09L11.78 6.03L10.87 9.09L13.5 7.28L16.13 9.09L15.22 6.03Z"><animate fill="freeze" attributeName="fill-opacity" dur="0.4s" values="1;0"></animate></path><path d="M19.61 12.25L21.25 11L19.19 10.95L18.5 9L17.81 10.95L15.75 11L17.39 12.25L16.8 14.23L18.5 13.06L20.2 14.23L19.61 12.25Z"><animate fill="freeze" attributeName="fill-opacity" begin="0.2s" dur="0.4s" values="1;0"></animate></path></g><g fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2"><path d="M7 6 C7 12.08 11.92 17 18 17 C18.53 17 19.05 16.96 19.56 16.89 C17.95 19.36 15.17 21 12 21 C7.03 21 3 16.97 3 12 C3 8.83 4.64 6.05 7.11 4.44 C7.04 4.95 7 5.47 7 6 Z"></path><set attributeName="opacity" begin="0.6s" to="0"></set></g><mask id="lineMdMoonToSunnyOutlineLoopTransition0"><circle cx="12" cy="12" r="12" fill="#fff"></circle><circle cx="12" cy="12" r="8"><animate fill="freeze" attributeName="r" begin="0.6s" dur="0.4s" values="8;4"></animate></circle><circle cx="18" cy="6" r="12" fill="#fff"><animate fill="freeze" attributeName="cx" begin="0.6s" dur="0.4s" values="18;22"></animate><animate fill="freeze" attributeName="cy" begin="0.6s" dur="0.4s" values="6;2"></animate><animate fill="freeze" attributeName="r" begin="0.6s" dur="0.4s" values="12;3"></animate></circle><circle cx="18" cy="6" r="10"><animate fill="freeze" attributeName="cx" begin="0.6s" dur="0.4s" values="18;22"></animate><animate fill="freeze" attributeName="cy" begin="0.6s" dur="0.4s" values="6;2"></animate><animate fill="freeze" attributeName="r" begin="0.6s" dur="0.4s" values="10;1"></animate></circle></mask><circle cx="12" cy="12" r="10" fill="currentColor" mask="url(#lineMdMoonToSunnyOutlineLoopTransition0)" opacity="0"><set attributeName="opacity" begin="0.6s" to="1"></set><animate fill="freeze" attributeName="r" begin="0.6s" dur="0.4s" values="10;6"></animate></circle></svg> </div></div></nav></div> <nav class="sub-nav svelte-d6nxno" aria-label="Browse docs"><div role="button" tabindex="0" class="i-ic-round-menu-open text-6"></div> <div role="button" tabindex="0">On this page</div> </nav> </header> <div class="backdrop svelte-112ytuk" role="none" style="top: 56px; z-index: 887;"></div>   <div pb-4 class="theme-default--page-layout"><div class="content svelte-1jx2zng"> <div id="Svelte-Reader---an-easy-way-to-embed-a-ePub-into-your-webapp" class="svp-anchor-item"></div> <h1 data-svelte-h="svelte-ksnp8q"><a href="#Svelte-Reader---an-easy-way-to-embed-a-ePub-into-your-webapp" class="svp-title-anchor" aria-label="Svelte Reader - an easy way to embed a ePub into your webapp"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Svelte Reader - an easy way to embed a ePub into your webapp</h1> <p data-svelte-h="svelte-1jum016">An svelte-reader for svelte powered by EpubJS</p> <div id="Basic-usage" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1s1o76g"><a href="#Basic-usage" class="svp-title-anchor" aria-label="Basic usage"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Basic usage</h2>  <div class="svp-tab svelte-azcy50"><div class="tab-header svelte-azcy50" style="--bar-op:0;"> </div> <div class="svelte-azcy50"><div class="tab-body svelte-azcy50"><div class="tab-panel svelte-150jkri"><div slot="npm"><div class="svp-code-block-wrapper"><div class="svp-code-block"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1h57dik"><code><span class="line"><span style="color: #59873A">npm</span><span style="color: #393A34"> </span><span style="color: #B56959">install</span><span style="color: #393A34"> </span><span style="color: #B56959">svelte-reader</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-922uhf"><code><span class="line"><span style="color: #82AAFF; font-style: italic">npm</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">install</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">svelte-reader</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-161hl8v">sh</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div></div></div></div></div>  </div></div> </div> <p data-svelte-h="svelte-xz378m">And in your svelte-component...</p> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-if44js">basic-usage</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1l1auxj"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-1k60au9"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> /&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-40kpkf"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="SvelteReader-Attributes" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1605ty6"><a href="#SvelteReader-Attributes" class="svp-title-anchor" aria-label="SvelteReader Attributes"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>SvelteReader Attributes</h2> <table data-svelte-h="svelte-1d1248g"><thead><tr><th><strong>Name</strong></th> <th><strong>Description</strong></th> <th><strong>Type</strong></th> <th><strong>Default</strong></th></tr></thead> <tbody><tr><td>url</td> <td>book url or arrayBuffer</td> <td><code>string</code>/<code>ArrayBuffer</code></td> <td>—</td></tr> <tr><td>title</td> <td>the title of the book</td> <td><code>string</code></td> <td>—</td></tr> <tr><td>showToc</td> <td>whether to show the toc</td> <td><code>boolean</code></td> <td>true</td></tr></tbody></table> <div id="SvelteReader-Slots" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1lq7ezq"><a href="#SvelteReader-Slots" class="svp-title-anchor" aria-label="SvelteReader Slots"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>SvelteReader Slots</h2> <table><thead data-svelte-h="svelte-182qaci"><tr><th><strong>Name</strong></th> <th><strong>Description</strong></th></tr></thead> <tbody><tr><td data-svelte-h="svelte-18gaf8k">title</td> <td>You have access to title by <a href="https://svelte.dev/docs/special-elements" class="link   highlight svelte-1rl6eur" target="_blank" aria-label="slot"> <div>slot</div> <svg width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2"><path strokedasharray="36" strokedashoffset="36" d="M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.6s" values="36;0"></animate></path><path strokedasharray="12" strokedashoffset="12" d="M13 11L20 4"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.3s" values="12;0"></animate></path><path strokedasharray="8" strokedashoffset="8" d="M21 3H15M21 3V9"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.9s" dur="0.2s" values="8;0"></animate></path></g></svg>  </a></td></tr></tbody></table> <div id="SvelteReader-props-passed-to-inner-EpubView" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1cdycl3"><a href="#SvelteReader-props-passed-to-inner-EpubView" class="svp-title-anchor" aria-label="SvelteReader props passed to inner EpubView"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>SvelteReader props passed to inner EpubView</h2> <div id="EpubView-Attributes" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-7os9j7"><a href="#EpubView-Attributes" class="svp-title-anchor" aria-label="EpubView Attributes"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>EpubView Attributes</h2> <table><thead data-svelte-h="svelte-1g1kqrn"><tr><th><strong>Name</strong></th> <th><strong>Description</strong></th> <th><strong>Type</strong></th> <th><strong>Default</strong></th></tr></thead> <tbody><tr data-svelte-h="svelte-1vgrk9z"><td>url</td> <td>the path or arrayBuffer of the book</td> <td><code>string</code>/<code>ArrayBuffer</code></td> <td>—</td></tr> <tr data-svelte-h="svelte-g9o08l"><td>location</td> <td>set / update location of the epub</td> <td><code>string</code>/<code>number</code></td> <td>—</td></tr> <tr data-svelte-h="svelte-1n2y1m1"><td>tocChanged</td> <td>when the reader has parsed the book you will receive an array of the chapters</td> <td><code>function(toc)</code></td> <td>—</td></tr> <tr data-svelte-h="svelte-1343vxv"><td>handleKeyPress</td> <td>when press the key</td> <td><code>function(event)</code></td> <td></td></tr> <tr data-svelte-h="svelte-uk1qmc"><td>handleTextSelected</td> <td>when select text</td> <td><code>function(cfiRange,contents)</code></td> <td></td></tr> <tr><td data-svelte-h="svelte-jyxp3s">epubInitOptions</td> <td>pass custom properties to the epub init function, see <a href="http://epubjs.org/documentation/0.3/#epub" class="link   highlight svelte-1rl6eur" target="_blank" aria-label="epub.js"> <div>epub.js</div> <svg width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2"><path strokedasharray="36" strokedashoffset="36" d="M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.6s" values="36;0"></animate></path><path strokedasharray="12" strokedashoffset="12" d="M13 11L20 4"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.3s" values="12;0"></animate></path><path strokedasharray="8" strokedashoffset="8" d="M21 3H15M21 3V9"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.9s" dur="0.2s" values="8;0"></animate></path></g></svg>  </a></td> <td data-svelte-h="svelte-1cr7pfm"><code>object</code></td> <td data-svelte-h="svelte-1nsl16q">—</td></tr> <tr><td data-svelte-h="svelte-k8w8bm">epubOptions</td> <td>pass custom properties to the epub rendition, see <a href="http://epubjs.org/documentation/0.3/#rendition" class="link   highlight svelte-1rl6eur" target="_blank" aria-label="epub.js's book.renderTo function"> <div>epub.js's book.renderTo function</div> <svg width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2"><path strokedasharray="36" strokedashoffset="36" d="M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.6s" values="36;0"></animate></path><path strokedasharray="12" strokedashoffset="12" d="M13 11L20 4"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.3s" values="12;0"></animate></path><path strokedasharray="8" strokedashoffset="8" d="M21 3H15M21 3V9"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.9s" dur="0.2s" values="8;0"></animate></path></g></svg>  </a></td> <td data-svelte-h="svelte-1cr7pfm"><code>object</code></td> <td data-svelte-h="svelte-1nsl16q">—</td></tr> <tr data-svelte-h="svelte-ok2us0"><td>getRendition</td> <td>when epubjs has rendered the epub-file you can get access to the epubjs-rendition object here</td> <td><code>function(rendition)</code></td> <td>—</td></tr></tbody></table> <div id="EpubView-Events" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-aaxjub"><a href="#EpubView-Events" class="svp-title-anchor" aria-label="EpubView Events"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>EpubView Events</h2> <table data-svelte-h="svelte-1vlvvis"><thead><tr><th><strong>Name</strong></th> <th><strong>Description</strong></th> <th><strong>Parameters</strong></th></tr></thead> <tbody><tr><td>update<div></div></td> <td>a function that receives the current location while user is reading. This function is called everytime the page changes, and also when it first renders.</td> <td>the updated location</td></tr></tbody></table> <div id="EpubView--Slots" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1bz25xk"><a href="#EpubView--Slots" class="svp-title-anchor" aria-label="EpubView  Slots"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>EpubView  Slots</h2> <table data-svelte-h="svelte-m3nv5o"><thead><tr><th><strong>Name</strong></th> <th><strong>Description</strong></th></tr></thead> <tbody><tr><td>loadingView</td> <td>epub view loadingView</td></tr></tbody></table> <div id="EpubView-Exposes" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1sm06f9"><a href="#EpubView-Exposes" class="svp-title-anchor" aria-label="EpubView Exposes"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>EpubView Exposes</h2> <table data-svelte-h="svelte-7dwfya"><thead><tr><th><strong>Name</strong></th> <th><strong>Description</strong></th> <th><strong>Type</strong></th></tr></thead> <tbody><tr><td>nextPage</td> <td>display  next page</td> <td><code>function</code></td></tr> <tr><td>prevPage</td> <td>display  previous page</td> <td><code>function</code></td></tr> <tr><td>setLocation</td> <td>Set the page</td> <td><code>function(href)</code></td></tr></tbody></table> <div id="Recipes-and-tips" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1vinbne"><a href="#Recipes-and-tips" class="svp-title-anchor" aria-label="Recipes and tips"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Recipes and tips</h2> <div id="Save-and-retrieve-progress-from-storage" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-e7rmtj"><a href="#Save-and-retrieve-progress-from-storage" class="svp-title-anchor" aria-label="Save and retrieve progress from storage"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Save and retrieve progress from storage</h2> <p data-svelte-h="svelte-bneilj">Saving the current page on storage is pretty simple, but we need to keep in mind that <code>locationChanged</code> also gets called on the very first render of our app.</p> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-1jg7mrf">save-progress</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-d5ojwm"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">browser</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&#39;</span><span style="color: #B56959">$app/environment</span><span style="color: #B56959AA">&#39;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">location</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">browser</span><span style="color: #393A34"> </span><span style="color: #AB5959">&amp;&amp;</span><span style="color: #393A34"> </span><span style="color: #B07D48">localStorage</span><span style="color: #999999">.</span><span style="color: #59873A">getItem</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">book-progress</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #AB5959">||</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">firstRenderDone</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">false</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">locationChange</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">if</span><span style="color: #999999">(</span><span style="color: #AB5959">!</span><span style="color: #B07D48">browser</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #1E754F">return</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">epubcifi</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">e</span><span style="color: #999999">.</span><span style="color: #B07D48">detail</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #999999">    </span><span style="color: #A0ADA0">// Since this function is also called on initial rendering, we are using custom state</span></span>
<span class="line"><span style="color: #999999">    </span><span style="color: #A0ADA0">// logic to check if this is the initial render.</span></span>
<span class="line"><span style="color: #999999">    </span><span style="color: #A0ADA0">// If you block this function from running (i.e not letting it change the page on the first render) your app crashes.</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #AB5959">!</span><span style="color: #B07D48">firstRenderDone</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">location</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">localStorage</span><span style="color: #999999">.</span><span style="color: #59873A">getItem</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">book-progress</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">firstRenderDone</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">true</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">    </span><span style="color: #A0ADA0">// This is the code that runs everytime the page changes, after the initial render.</span></span>
<span class="line"><span style="color: #999999">    </span><span style="color: #A0ADA0">// Saving the current epubcifi on storage...</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">localStorage</span><span style="color: #999999">.</span><span style="color: #59873A">setItem</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">book-progress</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">epubcifi</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #999999">    </span><span style="color: #A0ADA0">// And then rendering it.</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">location</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">epubcifi</span><span style="color: #999999">;</span><span style="color: #393A34"> </span><span style="color: #A0ADA0">// Or setLocation(localStorage.getItem(&quot;book-progress&quot;))</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">{location}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">update</span><span style="color: #393A34">:</span><span style="color: #B07D48">location</span><span style="color: #999999">={</span><span style="color: #B07D48">locationChange</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-1cdzsn7"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { browser } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">$app/environment</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">location</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">browser</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">&amp;&amp;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">localStorage</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">getItem</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">book-progress</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">||</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">firstRenderDone</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">false</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">locationChange</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">e</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">if</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">!</span><span style="color: #D7DBE0">browser</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> return</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">epubcifi</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">detail</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA">    </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Since this function is also called on initial rendering, we are using custom state</span></span>
<span class="line"><span style="color: #C792EA">    </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> logic to check if this is the initial render.</span></span>
<span class="line"><span style="color: #C792EA">    </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> If you block this function from running (i.e not letting it change the page on the first render) your app crashes.</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">!</span><span style="color: #D7DBE0">firstRenderDone</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #D7DBE0">location</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">localStorage</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">getItem</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">book-progress</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      return </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">firstRenderDone</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">true</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA">    </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> This is the code that runs everytime the page changes, after the initial render.</span></span>
<span class="line"><span style="color: #C792EA">    </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Saving the current epubcifi on storage...</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">localStorage</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">setItem</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">book-progress</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">epubcifi</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA">    </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> And then rendering it.</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">location</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">epubcifi</span><span style="color: #C792EA">;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Or setLocation(localStorage.getItem(&quot;book-progress&quot;))</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">{</span><span style="color: #D6DEEB">location</span><span style="color: #C5E478; font-style: italic">}</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:update:</span><span style="color: #C5E478; font-style: italic">location</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">locationChange</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">  /&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-5zy26t"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Display-page-number-for-current-chapter" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1tpe7qa"><a href="#Display-page-number-for-current-chapter" class="svp-title-anchor" aria-label="Display page number for current chapter"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Display page number for current chapter</h2> <p data-svelte-h="svelte-19517p0">We store the epubjs rendition in a ref, and get the page numbers in the callback when location is changed. Note that in this example we also find them name of the current chapter from the toc. Also see limitation for pagination for the whole book.</p> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="position: relative"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div> <div class="page svelte-ut49mg"></div> </div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-1u1ww8o">display-page</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1tuwolm"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">toc</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">[];</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">page</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">getRendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">val</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">val</span><span style="color: #999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">getLabel</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">toc</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">href</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">label</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">n/a</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">toc</span><span style="color: #999999">.</span><span style="color: #59873A">some</span><span style="color: #999999">((</span><span style="color: #B07D48">item</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #B07D48">subitems</span><span style="color: #999999">.</span><span style="color: #998418">length</span><span style="color: #393A34"> </span><span style="color: #AB5959">&gt;</span><span style="color: #393A34"> </span><span style="color: #2F798A">0</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">subChapter</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #59873A">getLabel</span><span style="color: #999999">(</span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #B07D48">subitems</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">href</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">subChapter</span><span style="color: #393A34"> </span><span style="color: #AB5959">!==</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">n/a</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #B07D48">label</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">subChapter</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #1E754F">true</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">else</span><span style="color: #393A34"> </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #B07D48">href</span><span style="color: #999999">.</span><span style="color: #59873A">includes</span><span style="color: #999999">(</span><span style="color: #B07D48">href</span><span style="color: #999999">))</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B07D48">label</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #B07D48">label</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #1E754F">true</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #B07D48">label</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">locationChange</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">epubcifi</span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">e</span><span style="color: #999999">.</span><span style="color: #B07D48">detail</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">epubcifi</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">displayed</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">href</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">location</span><span style="color: #999999">.</span><span style="color: #B07D48">start</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">href</span><span style="color: #393A34"> </span><span style="color: #AB5959">!==</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">titlepage.xhtml</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">label</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #59873A">getLabel</span><span style="color: #999999">(</span><span style="color: #B07D48">toc</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">href</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B07D48">page</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959AA">`</span><span style="color: #999999">${</span><span style="color: #B56959">displayed</span><span style="color: #999999">.</span><span style="color: #B56959">page</span><span style="color: #999999">}</span><span style="color: #B56959">/</span><span style="color: #999999">${</span><span style="color: #B56959">displayed</span><span style="color: #999999">.</span><span style="color: #B56959">total</span><span style="color: #999999">}</span><span style="color: #B56959"> </span><span style="color: #999999">${</span><span style="color: #B56959">label</span><span style="color: #999999">}</span><span style="color: #B56959AA">`</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&#39;</span><span style="color: #B56959">position: relative</span><span style="color: #B56959AA">&#39;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">{getRendition}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">tocChanged</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">val</span><span style="color: #999999">=&gt;</span><span style="color: #B56959">toc</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959">val</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">update</span><span style="color: #393A34">:</span><span style="color: #B07D48">location</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">locationChange</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">page</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">page</span><span style="color: #393A34"> </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">page</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">position</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">absolute</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">right</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">left</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">text-align</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">z-index</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">color</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">#</span><span style="color: #A65E2B">000</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-17ck3za"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">toc</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB; font-style: italic"> </span><span style="color: #D6DEEB">[];</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">page</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getRendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">val</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">val</span><span style="color: #D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getLabel</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">toc</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0; font-style: italic">href</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">label</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">n/a</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">toc</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">some</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">item</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">subitems</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #7FDBCA; font-style: italic">length</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">subChapter</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getLabel</span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">subitems</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">href</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">subChapter</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">!==</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">n/a</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #D7DBE0">label</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">subChapter</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          return </span><span style="color: #FF5874; font-style: italic">true</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">}</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">else</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">href</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">includes</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">href</span><span style="color: #D6DEEB">))</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #D7DBE0">label</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">label</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        return </span><span style="color: #FF5874; font-style: italic">true</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    return </span><span style="color: #D7DBE0">label</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">locationChange</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">e</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">epubcifi</span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">detail</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">epubcifi</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">displayed</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">href</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">}</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">location</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">start</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">href</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">!==</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">titlepage.xhtml</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">label</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getLabel</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">toc</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">href</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #D7DBE0">page</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">`</span><span style="color: #D3423E">${</span><span style="color: #7FDBCA; font-style: italic">displayed</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">page</span><span style="color: #D3423E">}</span><span style="color: #ECC48D; font-style: italic">/</span><span style="color: #D3423E">${</span><span style="color: #7FDBCA; font-style: italic">displayed</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">total</span><span style="color: #D3423E">}</span><span style="color: #ECC48D; font-style: italic"> </span><span style="color: #D3423E">${</span><span style="color: #D7DBE0">label</span><span style="color: #D3423E">}</span><span style="color: #D6DEEB">`</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">position: relative</span><span style="color: #D9F5DD">&#39;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">{</span><span style="color: #D6DEEB">getRendition</span><span style="color: #C5E478; font-style: italic">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">tocChanged</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D7DBE0">val</span><span style="color: #C792EA">=&gt;</span><span style="color: #D6DEEB">toc</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=</span><span style="color: #ECC48D"> </span><span style="color: #D6DEEB">val</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:update:</span><span style="color: #C5E478; font-style: italic">location</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">locationChange</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">page</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #D3423E">{</span><span style="color: #D6DEEB"> page </span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">page</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">position</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">absolute</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">right</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">left</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">text-align</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">z-index</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">color</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">#</span><span style="color: #FFEB95">000</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-121hp1a"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div> <div class="svp-code-block--line-number-item">34</div> <div class="svp-code-block--line-number-item">35</div> <div class="svp-code-block--line-number-item">36</div> <div class="svp-code-block--line-number-item">37</div> <div class="svp-code-block--line-number-item">38</div> <div class="svp-code-block--line-number-item">39</div> <div class="svp-code-block--line-number-item">40</div> <div class="svp-code-block--line-number-item">41</div> <div class="svp-code-block--line-number-item">42</div> <div class="svp-code-block--line-number-item">43</div> <div class="svp-code-block--line-number-item">44</div> <div class="svp-code-block--line-number-item">45</div> <div class="svp-code-block--line-number-item">46</div> <div class="svp-code-block--line-number-item">47</div> <div class="svp-code-block--line-number-item">48</div> <div class="svp-code-block--line-number-item">49</div> <div class="svp-code-block--line-number-item">50</div> <div class="svp-code-block--line-number-item">51</div> <div class="svp-code-block--line-number-item">52</div> <div class="svp-code-block--line-number-item">53</div> <div class="svp-code-block--line-number-item">54</div> <div class="svp-code-block--line-number-item">55</div> <div class="svp-code-block--line-number-item">56</div> <div class="svp-code-block--line-number-item">57</div> <div class="svp-code-block--line-number-item">58</div> <div class="svp-code-block--line-number-item">59</div> <div class="svp-code-block--line-number-item">60</div> <div class="svp-code-block--line-number-item">61</div> <div class="svp-code-block--line-number-item">62</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Change-font-size" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-opm8p6"><a href="#Change-font-size" class="svp-title-anchor" aria-label="Change font-size"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Change font-size</h2> <p data-svelte-h="svelte-1g9ovst">Hooking into epubJS rendition object is the key for this also.</p> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="position: relative"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div> <div class="size svelte-1b00e0m"><button data-svelte-h="svelte-1e7jsmn">-</button> <span>Current size: 100%</span> <button data-svelte-h="svelte-1dr4z3n">+</button></div> </div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-mzgbwe">change-font-size</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1idhbhq"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">size</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #2F798A">100</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">changeSize</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">val</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">size</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">val</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">themes</span><span style="color: #999999">.</span><span style="color: #59873A">fontSize</span><span style="color: #999999">(</span><span style="color: #B56959AA">`</span><span style="color: #999999">${</span><span style="color: #B56959">val</span><span style="color: #999999">}</span><span style="color: #B56959">%</span><span style="color: #B56959AA">`</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">getRendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">val</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">val</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">themes</span><span style="color: #999999">.</span><span style="color: #59873A">fontSize</span><span style="color: #999999">(</span><span style="color: #B56959AA">`</span><span style="color: #999999">${</span><span style="color: #B56959">size</span><span style="color: #999999">}</span><span style="color: #B56959">%</span><span style="color: #B56959AA">`</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&#39;</span><span style="color: #B56959">position: relative</span><span style="color: #B56959AA">&#39;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #B07D48">{getRendition}</span><span style="color: #393A34"> </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">size</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">button</span><span style="color: #393A34"> </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">click</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #59873A">changeSize</span><span style="color: #999999">(</span><span style="color: #B56959">Math</span><span style="color: #999999">.</span><span style="color: #59873A">max</span><span style="color: #999999">(</span><span style="color: #2F798A">80</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959">size</span><span style="color: #393A34"> </span><span style="color: #AB5959">-</span><span style="color: #393A34"> </span><span style="color: #2F798A">10</span><span style="color: #999999">))</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span><span style="color: #393A34">-</span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">button</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">span</span><span style="color: #999999">&gt;</span><span style="color: #393A34">Current size: </span><span style="color: #999999">{</span><span style="color: #B07D48">size</span><span style="color: #999999">}</span><span style="color: #393A34">%</span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">span</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">button</span><span style="color: #393A34"> </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">click</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #59873A">changeSize</span><span style="color: #999999">(</span><span style="color: #B56959">Math</span><span style="color: #999999">.</span><span style="color: #59873A">min</span><span style="color: #999999">(</span><span style="color: #2F798A">130</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959">size</span><span style="color: #393A34"> </span><span style="color: #AB5959">+</span><span style="color: #393A34"> </span><span style="color: #2F798A">10</span><span style="color: #999999">))</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span><span style="color: #393A34">+</span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">button</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">size</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">position</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">absolute</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">right</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">left</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">z-index</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">text-align</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">color</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">#</span><span style="color: #A65E2B">000</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-1jros6x"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">size</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #F78C6C">100</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">changeSize</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">val</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">size</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">val</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">themes</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">fontSize</span><span style="color: #D6DEEB">(</span><span style="color: #D6DEEB">`</span><span style="color: #D3423E">${</span><span style="color: #D7DBE0">val</span><span style="color: #D3423E">}</span><span style="color: #ECC48D; font-style: italic">%</span><span style="color: #D6DEEB">`</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getRendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">val</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">val</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">themes</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">fontSize</span><span style="color: #D6DEEB">(</span><span style="color: #D6DEEB">`</span><span style="color: #D3423E">${</span><span style="color: #D7DBE0">size</span><span style="color: #D3423E">}</span><span style="color: #ECC48D; font-style: italic">%</span><span style="color: #D6DEEB">`</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">position: relative</span><span style="color: #D9F5DD">&#39;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">{</span><span style="color: #D6DEEB">getRendition</span><span style="color: #C5E478; font-style: italic">}</span><span style="color: #7FDBCA"> /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">size</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:click=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">()</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #ECC48D"> </span><span style="color: #82AAFF; font-style: italic">changeSize</span><span style="color: #D6DEEB">(Math</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">max</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">80</span><span style="color: #ECC48D">, </span><span style="color: #D6DEEB">size</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">-</span><span style="color: #ECC48D"> </span><span style="color: #F78C6C">10</span><span style="color: #D6DEEB">))</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">-</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">span</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">Current size: </span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">size</span><span style="color: #D3423E">}</span><span style="color: #D6DEEB">%</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">span</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:click=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">()</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #ECC48D"> </span><span style="color: #82AAFF; font-style: italic">changeSize</span><span style="color: #D6DEEB">(Math</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">min</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">130</span><span style="color: #ECC48D">, </span><span style="color: #D6DEEB">size</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">+</span><span style="color: #ECC48D"> </span><span style="color: #F78C6C">10</span><span style="color: #D6DEEB">))</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">+</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">size</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">position</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">absolute</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">right</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">left</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">z-index</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">text-align</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">color</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">#</span><span style="color: #FFEB95">000</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-bqu3bd"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div> <div class="svp-code-block--line-number-item">34</div> <div class="svp-code-block--line-number-item">35</div> <div class="svp-code-block--line-number-item">36</div> <div class="svp-code-block--line-number-item">37</div> <div class="svp-code-block--line-number-item">38</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Add---adjust-custom-css-for-the-epub-html" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1d5hf9y"><a href="#Add---adjust-custom-css-for-the-epub-html" class="svp-title-anchor" aria-label="Add / adjust custom css for the epub-html"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Add / adjust custom css for the epub-html</h2> <p data-svelte-h="svelte-17nou6h">EpubJS render the epub-file inside a iframe so you will need to create a custom theme and apply it.<br>
This is useful for when you want to set custom font families, custom background and text colors, and everything CSS related.</p> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-15qyb6x">custom-css</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-68x5at"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">getRendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">rendition</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">themes</span><span style="color: #999999">.</span><span style="color: #59873A">register</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">custom</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">*</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #998418">color</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">#fff</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">background-color</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">#252525</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">},</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #998418">image</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #998418">border</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">1px solid red</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">},</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #998418">p</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">font-family</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">Helvetica, sans-serif</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">font-weight</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">400</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">font-size</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">20px</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #998418">border</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">1px solid green</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">},</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">themes</span><span style="color: #999999">.</span><span style="color: #59873A">select</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">custom</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #B07D48">{getRendition}</span><span style="color: #393A34"> </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-mylzs2"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getRendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">rendition</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">themes</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">register</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">custom</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">*</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        color</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">#fff</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">background-color</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">#252525</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">},</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      image</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        border</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">1px solid red</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">},</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      p</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">font-family</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">Helvetica, sans-serif</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">font-weight</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">400</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">font-size</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">20px</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        border</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">1px solid green</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">},</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">themes</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">select</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">custom</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">{</span><span style="color: #D6DEEB">getRendition</span><span style="color: #C5E478; font-style: italic">}</span><span style="color: #7FDBCA"> /&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-gg0tqu"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Hightlight-selection-in-epub" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-4pyub8"><a href="#Hightlight-selection-in-epub" class="svp-title-anchor" aria-label="Hightlight selection in epub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Hightlight selection in epub</h2> <p data-svelte-h="svelte-nlgbgx">This shows how to hook into epubJS annotations object and let the user highlight selection and store this in a list where user can go to a selection or delete it.</p> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="position: relative"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div> <div class="selection svelte-1s0tff2">Selection:
    <ul></ul></div> </div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-1vg7siq">hightlight</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-ndsg1j"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">onDestroy</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">selections</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #999999">[]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">setRenderSelection</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">cfiRange</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">contents</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">selections</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">[...</span><span style="color: #B07D48">selections</span><span style="color: #999999">,{</span><span style="color: #998418">text</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">getRange</span><span style="color: #999999">(</span><span style="color: #B07D48">cfiRange</span><span style="color: #999999">).</span><span style="color: #59873A">toString</span><span style="color: #999999">(),</span><span style="color: #B07D48">cfiRange</span><span style="color: #999999">}];</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">annotations</span><span style="color: #999999">.</span><span style="color: #59873A">add</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">highlight</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">cfiRange</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #999999">{},</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">hl</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #998418">fill</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">red</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">fill-opacity</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">0.5</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">mix-blend-mode</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">multiply</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">contents</span><span style="color: #999999">.</span><span style="color: #B07D48">window</span><span style="color: #999999">.</span><span style="color: #59873A">getSelection</span><span style="color: #999999">().</span><span style="color: #59873A">removeAllRanges</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">getRendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">val</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">val</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">themes</span><span style="color: #999999">.</span><span style="color: #59873A">default</span><span style="color: #999999">({</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">::selection</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #998418">background</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">orange</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">},</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">on</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">selected</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">setRenderSelection</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">remove</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">cfiRange</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">index</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">annotations</span><span style="color: #999999">.</span><span style="color: #59873A">remove</span><span style="color: #999999">(</span><span style="color: #B07D48">cfiRange</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">highlight</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">selections</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">selections</span><span style="color: #999999">.</span><span style="color: #59873A">filter</span><span style="color: #999999">((</span><span style="color: #B07D48">item</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">j</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #B07D48">j</span><span style="color: #393A34"> </span><span style="color: #AB5959">!==</span><span style="color: #393A34"> </span><span style="color: #B07D48">index</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&#39;</span><span style="color: #B56959">position: relative</span><span style="color: #B56959AA">&#39;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #B07D48">getRendition</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">getRendition</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">selection</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    Selection:</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">ul</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">{#</span><span style="color: #1E754F">each</span><span style="color: #393A34"> </span><span style="color: #B07D48">selections</span><span style="color: #393A34"> </span><span style="color: #1E754F">as</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">text</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">cfiRange</span><span style="color: #393A34"> </span><span style="color: #999999">},</span><span style="color: #393A34"> </span><span style="color: #B07D48">index</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">li</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #999999">{</span><span style="color: #B07D48">text</span><span style="color: #393A34"> </span><span style="color: #AB5959">||</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">button</span><span style="color: #393A34"> </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">click</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #B56959">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">display</span><span style="color: #999999">(</span><span style="color: #B56959">cfiRange</span><span style="color: #999999">)</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span><span style="color: #393A34">show</span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">button</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">button</span><span style="color: #393A34"> </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">click</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #59873A">remove</span><span style="color: #999999">(</span><span style="color: #B56959">cfiRange</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959">index</span><span style="color: #999999">)</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span><span style="color: #393A34">x</span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">button</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">li</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">{/</span><span style="color: #1E754F">each</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">ul</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">selection</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">position</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">absolute</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">right</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">left</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">z-index</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">background-color</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">white</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">color</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">#</span><span style="color: #A65E2B">000</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-1d6c6e4"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { onDestroy } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">selections</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB">[]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">setRenderSelection</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">cfiRange</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0; font-style: italic">contents</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">selections</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB; font-style: italic"> </span><span style="color: #D6DEEB">[</span><span style="color: #7FDBCA">...</span><span style="color: #D7DBE0">selections</span><span style="color: #D6DEEB">,{</span><span style="color: #D6DEEB; font-style: italic">text</span><span style="color: #D6DEEB">:</span><span style="color: #D6DEEB; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">getRange</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">cfiRange</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">toString</span><span style="color: #D6DEEB">(),</span><span style="color: #D7DBE0">cfiRange</span><span style="color: #D6DEEB">}]</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">annotations</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">add</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">highlight</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">cfiRange</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{},</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">hl</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      fill</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">red</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">fill-opacity</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">0.5</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">mix-blend-mode</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">multiply</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">contents</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">window</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">getSelection</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">removeAllRanges</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getRendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">val</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">val</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">themes</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">default</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">::selection</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        background</span><span style="color: #C792EA">:</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">orange</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">},</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">on</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">selected</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">setRenderSelection</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">remove</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">cfiRange</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0; font-style: italic">index</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">annotations</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">remove</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">cfiRange</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">highlight</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">selections</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">selections</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">filter</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">item</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0; font-style: italic">j</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">j</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">!==</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">index</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">position: relative</span><span style="color: #D9F5DD">&#39;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">getRendition</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">getRendition</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">selection</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    Selection:</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">ul</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">      {#</span><span style="color: #C792EA; font-style: italic">each</span><span style="color: #D6DEEB"> selections </span><span style="color: #C792EA; font-style: italic">as</span><span style="color: #D6DEEB"> { text, cfiRange }, index}</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">li</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">          </span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">text </span><span style="color: #C792EA">||</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #D6DEEB">          </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:click=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">()</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #ECC48D"> </span><span style="color: #D6DEEB">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">display</span><span style="color: #D6DEEB">(cfiRange)</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">show</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">          </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:click=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">()</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #ECC48D"> </span><span style="color: #82AAFF; font-style: italic">remove</span><span style="color: #D6DEEB">(cfiRange</span><span style="color: #ECC48D">, </span><span style="color: #D6DEEB">index)</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">x</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">li</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">      {/</span><span style="color: #C792EA; font-style: italic">each</span><span style="color: #D6DEEB">}</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">ul</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">selection</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">position</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">absolute</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">right</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">left</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">z-index</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">background-color</span><span style="color: #D6DEEB">: </span><span style="color: #7FDBCA">white</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">color</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">#</span><span style="color: #FFEB95">000</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-f3dw2i"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div> <div class="svp-code-block--line-number-item">34</div> <div class="svp-code-block--line-number-item">35</div> <div class="svp-code-block--line-number-item">36</div> <div class="svp-code-block--line-number-item">37</div> <div class="svp-code-block--line-number-item">38</div> <div class="svp-code-block--line-number-item">39</div> <div class="svp-code-block--line-number-item">40</div> <div class="svp-code-block--line-number-item">41</div> <div class="svp-code-block--line-number-item">42</div> <div class="svp-code-block--line-number-item">43</div> <div class="svp-code-block--line-number-item">44</div> <div class="svp-code-block--line-number-item">45</div> <div class="svp-code-block--line-number-item">46</div> <div class="svp-code-block--line-number-item">47</div> <div class="svp-code-block--line-number-item">48</div> <div class="svp-code-block--line-number-item">49</div> <div class="svp-code-block--line-number-item">50</div> <div class="svp-code-block--line-number-item">51</div> <div class="svp-code-block--line-number-item">52</div> <div class="svp-code-block--line-number-item">53</div> <div class="svp-code-block--line-number-item">54</div> <div class="svp-code-block--line-number-item">55</div> <div class="svp-code-block--line-number-item">56</div> <div class="svp-code-block--line-number-item">57</div> <div class="svp-code-block--line-number-item">58</div> <div class="svp-code-block--line-number-item">59</div> <div class="svp-code-block--line-number-item">60</div> <div class="svp-code-block--line-number-item">61</div> <div class="svp-code-block--line-number-item">62</div> <div class="svp-code-block--line-number-item">63</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Handling-missing-mime-types-on-server" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1hwedqv"><a href="#Handling-missing-mime-types-on-server" class="svp-title-anchor" aria-label="Handling missing mime-types on server"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Handling missing mime-types on server</h2> <p data-svelte-h="svelte-1xkokrm">EpubJS will try to parse the epub-file you pass to it, but if the server send wrong mine-types or the file does not contain <code>.epub</code> you can use the epubInitOptions prop to force reading it right.</p> <div class="svp-code-block-wrapper"><div class="svp-code-block"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-zmqe4u"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">/my-epub-service</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #B07D48">epubInitOptions</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">{ </span><span style="color: #998418">openAs</span><span style="color: #999999">: </span><span style="color: #B56959AA">&#39;</span><span style="color: #B56959">epub</span><span style="color: #B56959AA">&#39;</span><span style="color: #999999"> }</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-1j12uly"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">/my-epub-service</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">epubInitOptions</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #ECC48D">{ openAs: </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">epub</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D"> }</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> /&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div></div></div> <div id="Display-a-scrolled-epub-view" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-d59sko"><a href="#Display-a-scrolled-epub-view" class="svp-title-anchor" aria-label="Display a scrolled epub-view"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Display a scrolled epub-view</h2> <p data-svelte-h="svelte-sks00v">Pass options for this into epubJS in the prop <code>epubOptions</code></p> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-1m75iyx">display-scrolled</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-6jjelx"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">epubOptions</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #999999">      </span><span style="color: #998418">flow</span><span style="color: #999999">: </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">scrolled</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #999999">      </span><span style="color: #998418">manager</span><span style="color: #999999">: </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">continuous</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #999999">    }</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-qfdl21"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">epubOptions</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #ECC48D">{</span></span>
<span class="line"><span style="color: #ECC48D">      flow: </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">scrolled</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">,</span></span>
<span class="line"><span style="color: #ECC48D">      manager: </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">continuous</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">,</span></span>
<span class="line"><span style="color: #ECC48D">    }</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">  /&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-152hg6p"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Enable-opening-links---running-scripts-inside-epubjs-iframe" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1w9ulnd"><a href="#Enable-opening-links---running-scripts-inside-epubjs-iframe" class="svp-title-anchor" aria-label="Enable opening links / running scripts inside epubjs iframe"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Enable opening links / running scripts inside epubjs iframe</h2> <p data-svelte-h="svelte-cvzaji">Epubjs is rendering the epub-content inside and iframe which defaults to <code>sandbox=&quot;allow-same-origin&quot;</code>, to enable opening links or running javascript in an epub, you will need to pass some extra params in the <code>epubOptions</code> prop.</p> <div class="svp-code-block-wrapper"><div class="svp-code-block"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1iug07e"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">epubOptions</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #999999">      </span><span style="color: #998418">allowPopups</span><span style="color: #999999">: </span><span style="color: #1E754F">true</span><span style="color: #999999">, </span><span style="color: #A0ADA0">// Adds `allow-popups` to sandbox-attribute</span></span>
<span class="line"><span style="color: #999999">      </span><span style="color: #998418">allowScriptedContent</span><span style="color: #999999">: </span><span style="color: #1E754F">true</span><span style="color: #999999">, </span><span style="color: #A0ADA0">// Adds `allow-scripts` to sandbox-attribute</span></span>
<span class="line"><span style="color: #999999">    }</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-12b2gyy"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">epubOptions</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #ECC48D">{</span></span>
<span class="line"><span style="color: #ECC48D">      allowPopups: </span><span style="color: #FF5874">true</span><span style="color: #ECC48D">, </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Adds `allow-popups` to sandbox-attribute</span></span>
<span class="line"><span style="color: #ECC48D">      allowScriptedContent: </span><span style="color: #FF5874">true</span><span style="color: #ECC48D">, </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Adds `allow-scripts` to sandbox-attribute</span></span>
<span class="line"><span style="color: #ECC48D">    }</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">  /&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div></div></div> <div id="Speak-the-text" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-n9h8qu"><a href="#Speak-the-text" class="svp-title-anchor" aria-label="Speak the text"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Speak the text</h2> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="position: relative"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div> <div class="speak svelte-lq6dic"><button class="reader-button">speak</button></div> </div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-1s0j06w">speak-text</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1dt7udz"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">isAudioOn</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">false</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">text</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">,</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">isReading</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">false</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">locationChange</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">range</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">getRange</span><span style="color: #999999">(</span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">currentLocation</span><span style="color: #999999">().</span><span style="color: #B07D48">start</span><span style="color: #999999">.</span><span style="color: #B07D48">cfi</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">endRange</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">getRange</span><span style="color: #999999">(</span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">currentLocation</span><span style="color: #999999">().</span><span style="color: #B07D48">end</span><span style="color: #999999">.</span><span style="color: #B07D48">cfi</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">range</span><span style="color: #999999">.</span><span style="color: #59873A">setEnd</span><span style="color: #999999">(</span><span style="color: #B07D48">endRange</span><span style="color: #999999">.</span><span style="color: #B07D48">startContainer</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">endRange</span><span style="color: #999999">.</span><span style="color: #B07D48">startOffset</span><span style="color: #999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">text</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">range</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">toString</span><span style="color: #999999">()</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">replace</span><span style="color: #999999">(</span><span style="color: #B56959AA">/</span><span style="color: #A65E2B">\s\s</span><span style="color: #B56959AA">/</span><span style="color: #1E754F">g</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">)</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">replace</span><span style="color: #999999">(</span><span style="color: #B56959AA">/</span><span style="color: #A65E2B">\r</span><span style="color: #B56959AA">/</span><span style="color: #1E754F">g</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">)</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">replace</span><span style="color: #999999">(</span><span style="color: #B56959AA">/</span><span style="color: #A65E2B">\n</span><span style="color: #B56959AA">/</span><span style="color: #1E754F">g</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">)</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">replace</span><span style="color: #999999">(</span><span style="color: #B56959AA">/</span><span style="color: #A65E2B">\t</span><span style="color: #B56959AA">/</span><span style="color: #1E754F">g</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">)</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">replace</span><span style="color: #999999">(</span><span style="color: #B56959AA">/</span><span style="color: #A65E2B">\f</span><span style="color: #B56959AA">/</span><span style="color: #1E754F">g</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;&quot;</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">speak</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">type</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">type</span><span style="color: #393A34"> </span><span style="color: #AB5959">===</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">click</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #B07D48">isReading</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">!</span><span style="color: #B07D48">isReading</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">isReading</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #59873A">voice</span><span style="color: #999999">(</span><span style="color: #B07D48">text</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">else</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">isAudioOn</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">false</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">window</span><span style="color: #999999">.</span><span style="color: #B07D48">speechSynthesis</span><span style="color: #999999">.</span><span style="color: #59873A">cancel</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">voice</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">text</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">rate</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">isAudioOn</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">true</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">msg</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">new</span><span style="color: #393A34"> </span><span style="color: #59873A">SpeechSynthesisUtterance</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">msg</span><span style="color: #999999">.</span><span style="color: #B07D48">text</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">text</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">msg</span><span style="color: #999999">.</span><span style="color: #B07D48">voice</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">window</span><span style="color: #999999">.</span><span style="color: #B07D48">speechSynthesis</span><span style="color: #999999">.</span><span style="color: #59873A">getVoices</span><span style="color: #999999">()[</span><span style="color: #2F798A">0</span><span style="color: #999999">];</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">msg</span><span style="color: #999999">.</span><span style="color: #B07D48">rate</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rate</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">window</span><span style="color: #999999">.</span><span style="color: #B07D48">speechSynthesis</span><span style="color: #999999">.</span><span style="color: #59873A">speak</span><span style="color: #999999">(</span><span style="color: #B07D48">msg</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">msg</span><span style="color: #999999">.</span><span style="color: #59873A">onerror</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">err</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">console</span><span style="color: #999999">.</span><span style="color: #59873A">log</span><span style="color: #999999">(</span><span style="color: #B07D48">err</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">msg</span><span style="color: #999999">.</span><span style="color: #59873A">onend</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">async</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">event</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #AB5959">!</span><span style="color: #B07D48">isReading</span><span style="color: #393A34"> </span><span style="color: #AB5959">&amp;&amp;</span><span style="color: #393A34"> </span><span style="color: #AB5959">!</span><span style="color: #B07D48">isAudioOn</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #1E754F">return</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">next</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #59873A">speak</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">position: relative</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">getRendition</span><span style="color: #999999">={(</span><span style="color: #B07D48">val</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">val</span><span style="color: #999999">)}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">update</span><span style="color: #393A34">:</span><span style="color: #B07D48">location</span><span style="color: #999999">={</span><span style="color: #B07D48">locationChange</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">speak</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">button</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">reader-button</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">click</span><span style="color: #999999">={()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #59873A">speak</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">click</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">)}&gt;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">{</span><span style="color: #B07D48">isReading</span><span style="color: #393A34"> </span><span style="color: #AB5959">?</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">cancel</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #AB5959">:</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">speak</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">button</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">speak</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">position</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">absolute</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">right</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">left</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">z-index</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">text-align</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-18gbozy"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">isAudioOn</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">false</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">text</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #C792EA">,</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">isReading</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">false</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">locationChange</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">()</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">range</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">getRange</span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">currentLocation</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">start</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">cfi</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">endRange</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">getRange</span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">currentLocation</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">end</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">cfi</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">range</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">setEnd</span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">endRange</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">startContainer</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">endRange</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">startOffset</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">text</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">range</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">toString</span><span style="color: #D6DEEB">()</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">replace</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">/</span><span style="color: #82AAFF; font-style: italic">\s\s</span><span style="color: #D9F5DD">/</span><span style="color: #5CA7E4">g</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">replace</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">/</span><span style="color: #82AAFF; font-style: italic">\r</span><span style="color: #D9F5DD">/</span><span style="color: #5CA7E4">g</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">replace</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">/</span><span style="color: #82AAFF; font-style: italic">\n</span><span style="color: #D9F5DD">/</span><span style="color: #5CA7E4">g</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">replace</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">/</span><span style="color: #82AAFF; font-style: italic">\t</span><span style="color: #D9F5DD">/</span><span style="color: #5CA7E4">g</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">replace</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">/</span><span style="color: #82AAFF; font-style: italic">\f</span><span style="color: #D9F5DD">/</span><span style="color: #5CA7E4">g</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">speak</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">type</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">type</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">===</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">click</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">isReading</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">!</span><span style="color: #D7DBE0">isReading</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">isReading</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #82AAFF; font-style: italic">voice</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">text</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">else</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #D7DBE0">isAudioOn</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">false</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #7FDBCA; font-style: italic">window</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">speechSynthesis</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">cancel</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">voice</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">text</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0; font-style: italic">rate</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #F78C6C">1</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">isAudioOn</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">true</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">msg</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA">new</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">SpeechSynthesisUtterance</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">msg</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">text</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">text</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">msg</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">voice</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">window</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">speechSynthesis</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">getVoices</span><span style="color: #D6DEEB">()[</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">]</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">msg</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">rate</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">rate</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">window</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">speechSynthesis</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">speak</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">msg</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">msg</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">onerror</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">err</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #7FDBCA; font-style: italic">console</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">log</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">err</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">};</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">msg</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">onend</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> async </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">event</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">!</span><span style="color: #D7DBE0">isReading</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">&amp;&amp;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">!</span><span style="color: #D7DBE0">isAudioOn</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> return</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">next</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #82AAFF; font-style: italic">speak</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">};</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">position: relative</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">getRendition</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0">val</span><span style="color: #D9F5DD">)</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #7FDBCA"> </span><span style="color: #D6DEEB">(rendition</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA">=</span><span style="color: #7FDBCA"> </span><span style="color: #D6DEEB">val)</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:update:</span><span style="color: #C5E478; font-style: italic">location</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">locationChange</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">    /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">speak</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">reader-button</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:click=</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">()</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #7FDBCA"> </span><span style="color: #82AAFF; font-style: italic">speak</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">click</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">      </span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">isReading </span><span style="color: #C792EA">?</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">cancel</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">speak</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">button</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">speak</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">position</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">absolute</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">right</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">left</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">z-index</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">text-align</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-aeqc2s"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div> <div class="svp-code-block--line-number-item">34</div> <div class="svp-code-block--line-number-item">35</div> <div class="svp-code-block--line-number-item">36</div> <div class="svp-code-block--line-number-item">37</div> <div class="svp-code-block--line-number-item">38</div> <div class="svp-code-block--line-number-item">39</div> <div class="svp-code-block--line-number-item">40</div> <div class="svp-code-block--line-number-item">41</div> <div class="svp-code-block--line-number-item">42</div> <div class="svp-code-block--line-number-item">43</div> <div class="svp-code-block--line-number-item">44</div> <div class="svp-code-block--line-number-item">45</div> <div class="svp-code-block--line-number-item">46</div> <div class="svp-code-block--line-number-item">47</div> <div class="svp-code-block--line-number-item">48</div> <div class="svp-code-block--line-number-item">49</div> <div class="svp-code-block--line-number-item">50</div> <div class="svp-code-block--line-number-item">51</div> <div class="svp-code-block--line-number-item">52</div> <div class="svp-code-block--line-number-item">53</div> <div class="svp-code-block--line-number-item">54</div> <div class="svp-code-block--line-number-item">55</div> <div class="svp-code-block--line-number-item">56</div> <div class="svp-code-block--line-number-item">57</div> <div class="svp-code-block--line-number-item">58</div> <div class="svp-code-block--line-number-item">59</div> <div class="svp-code-block--line-number-item">60</div> <div class="svp-code-block--line-number-item">61</div> <div class="svp-code-block--line-number-item">62</div> <div class="svp-code-block--line-number-item">63</div> <div class="svp-code-block--line-number-item">64</div> <div class="svp-code-block--line-number-item">65</div> <div class="svp-code-block--line-number-item">66</div> <div class="svp-code-block--line-number-item">67</div> <div class="svp-code-block--line-number-item">68</div> <div class="svp-code-block--line-number-item">69</div> <div class="svp-code-block--line-number-item">70</div> <div class="svp-code-block--line-number-item">71</div> <div class="svp-code-block--line-number-item">72</div> <div class="svp-code-block--line-number-item">73</div> <div class="svp-code-block--line-number-item">74</div> <div class="svp-code-block--line-number-item">75</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Get-book-information" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1v64bef"><a href="#Get-book-information" class="svp-title-anchor" aria-label="Get book information"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Get book information</h2> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div> </div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-drucd7">get-information</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1pdy6ku"><code><span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&#39;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&#39;</span><span style="color: #393A34"> </span><span style="color: #B07D48">getRendition</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">getRendition</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;/</span><span style="color: #998418">SvelteReader</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">{#</span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #B07D48">information</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&#39;</span><span style="color: #B56959">color: #000</span><span style="color: #B56959AA">&#39;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">img</span><span style="color: #393A34"> </span><span style="color: #B07D48">src</span><span style="color: #999999">={</span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">cover</span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #B07D48">alt</span><span style="color: #999999">={</span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">title</span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">width: 100px</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span><span style="color: #393A34">标题:</span><span style="color: #999999">{</span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">title</span><span style="color: #393A34"> </span><span style="color: #999999">}&lt;/</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span><span style="color: #393A34">作者:</span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">creator</span><span style="color: #393A34"> </span><span style="color: #999999">}&lt;/</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span><span style="color: #393A34">出版社:</span><span style="color: #999999">{</span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">publisher</span><span style="color: #393A34"> </span><span style="color: #999999">}&lt;/</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span><span style="color: #393A34">语言:</span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">language</span><span style="color: #393A34"> </span><span style="color: #999999">}&lt;/</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span><span style="color: #393A34">出版日期:</span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">pubdate</span><span style="color: #393A34"> </span><span style="color: #999999">}&lt;/</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span><span style="color: #393A34">修改日期:</span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">modified_date</span><span style="color: #393A34"> </span><span style="color: #999999">}&lt;/</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span><span style="color: #393A34">介绍:</span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">information</span><span style="color: #999999">.</span><span style="color: #B07D48">description</span><span style="color: #393A34"> </span><span style="color: #999999">}&lt;/</span><span style="color: #1E754F">p</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #999999">{/</span><span style="color: #1E754F">if</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">information</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">getRendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">rendition</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">book</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">ready</span><span style="color: #999999">.</span><span style="color: #59873A">then</span><span style="color: #999999">(()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">loaded</span><span style="color: #999999">.</span><span style="color: #B07D48">metadata</span><span style="color: #999999">.</span><span style="color: #59873A">then</span><span style="color: #999999">(</span><span style="color: #AB5959">async</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">metadata</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">              </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">cover</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">await</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #59873A">coverUrl</span><span style="color: #999999">()</span></span>
<span class="line"><span style="color: #393A34">              </span><span style="color: #B07D48">information</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #999999">...</span><span style="color: #B07D48">metadata</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">cover</span><span style="color: #393A34"> </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #999999">})</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">})</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-1pocysl"><code><span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&#39;</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">getRendition</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">getRendition</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">    {#</span><span style="color: #C792EA; font-style: italic">if</span><span style="color: #D6DEEB"> information}</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">color: #000</span><span style="color: #D9F5DD">&#39;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">img</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">src</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">cover</span><span style="color: #D3423E">}</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">alt</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">title</span><span style="color: #D3423E">}</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">width: 100px</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">标题:</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">title</span><span style="color: #D6DEEB"> </span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">作者:</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB"> information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">creator</span><span style="color: #D6DEEB"> </span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">出版社:</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">publisher</span><span style="color: #D6DEEB"> </span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">语言:</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB"> information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">language</span><span style="color: #D6DEEB"> </span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">出版日期:</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB"> information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">pubdate</span><span style="color: #D6DEEB"> </span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">修改日期:</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB"> information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">modified_date</span><span style="color: #D6DEEB"> </span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">介绍:</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB"> information</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">description</span><span style="color: #D6DEEB"> </span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">p</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">{/</span><span style="color: #C792EA; font-style: italic">if</span><span style="color: #D6DEEB">}</span></span>
<span class="line"><span style="color: #D6DEEB">    </span></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">information</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getRendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">rendition</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">book</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">book</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">ready</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">then</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">()</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">loaded</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">metadata</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">then</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA; font-style: italic">async </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">metadata</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">              </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">cover</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> await </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">coverUrl</span><span style="color: #D6DEEB">()</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">              </span><span style="color: #D7DBE0">information</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA">...</span><span style="color: #D7DBE0">metadata</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">cover</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-3osgl0"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Import-file" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1ngs6ze"><a href="#Import-file" class="svp-title-anchor" aria-label="Import file"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Import file</h2> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="position: relative;height: 100vh;"> <input type="file"  accept=".epub" class="input svelte-1v0n5sd"> </div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-u9yspy">import-file</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-jfs3kl"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">onchange</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">file</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">e</span><span style="color: #999999">.</span><span style="color: #B07D48">target</span><span style="color: #999999">.</span><span style="color: #B07D48">files</span><span style="color: #999999">[</span><span style="color: #2F798A">0</span><span style="color: #999999">];</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">window</span><span style="color: #999999">.</span><span style="color: #B07D48">FileReader</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #AB5959">var</span><span style="color: #393A34"> </span><span style="color: #B07D48">reader</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">new</span><span style="color: #393A34"> </span><span style="color: #59873A">FileReader</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">reader</span><span style="color: #999999">.</span><span style="color: #59873A">onloadend</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">url</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">reader</span><span style="color: #999999">.</span><span style="color: #B07D48">result</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">reader</span><span style="color: #999999">.</span><span style="color: #59873A">readAsArrayBuffer</span><span style="color: #999999">(</span><span style="color: #B07D48">file</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">position: relative;height: 100vh;</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">{#</span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #B07D48">url</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #B07D48">{url}</span><span style="color: #393A34"> </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">{/</span><span style="color: #1E754F">if</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">input</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">type</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">file</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">multiple</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #1E754F">false</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">accept</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #2F798A">.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">change</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">onchange</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">input</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">input</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">position</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">absolute</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">right</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">left</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">z-index</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-ipex0o"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">url</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">onchange</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">e</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">file</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">target</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">files</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">]</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">window</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">FileReader</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">var</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">reader</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA">new</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">FileReader</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #7FDBCA; font-style: italic">reader</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">onloadend</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">e</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">url</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">reader</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">result</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #7FDBCA; font-style: italic">reader</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">readAsArrayBuffer</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">file</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">}</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">position: relative;height: 100vh;</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  {#</span><span style="color: #C792EA; font-style: italic">if</span><span style="color: #D6DEEB"> url}</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">      </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">{</span><span style="color: #D6DEEB">url</span><span style="color: #C5E478; font-style: italic">}</span><span style="color: #7FDBCA"> /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  {/</span><span style="color: #C792EA; font-style: italic">if</span><span style="color: #D6DEEB">}</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">input</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">type</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">file</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">multiple</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #FF5874">false</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">accept</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #F78C6C">.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:change=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">onchange</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">input</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">  /&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">input</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">position</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">absolute</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">right</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">left</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">z-index</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-bqu3bd"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div> <div class="svp-code-block--line-number-item">34</div> <div class="svp-code-block--line-number-item">35</div> <div class="svp-code-block--line-number-item">36</div> <div class="svp-code-block--line-number-item">37</div> <div class="svp-code-block--line-number-item">38</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Current-progress" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1dzmvrl"><a href="#Current-progress" class="svp-title-anchor" aria-label="Current progress"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Current progress</h2> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="position: relative"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div> <div class="progress svelte-15anzw4"><input type="number" value="0" min="0" max="100" class="svelte-15anzw4">%
    <input type="range" value="0" min="0" max="100" step="1" class="svelte-15anzw4"></div> </div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-ij8grv">current-progress</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1yyijdv"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">current</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #2F798A">0</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">displayed</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">getRendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">val</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">val</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">book</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #B07D48">book</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">displayed</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">display</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">ready</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">then</span><span style="color: #999999">(()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">locations</span><span style="color: #999999">.</span><span style="color: #59873A">generate</span><span style="color: #999999">(</span><span style="color: #2F798A">1600</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">})</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">.</span><span style="color: #59873A">then</span><span style="color: #999999">((</span><span style="color: #B07D48">locations</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #999999">        </span><span style="color: #A0ADA0">// Wait for book to be rendered to get current page</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B07D48">displayed</span><span style="color: #999999">.</span><span style="color: #59873A">then</span><span style="color: #999999">(</span><span style="color: #AB5959">function</span><span style="color: #393A34"> </span><span style="color: #999999">()</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #999999">          </span><span style="color: #A0ADA0">// Get the current CFI</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #AB5959">var</span><span style="color: #393A34"> </span><span style="color: #B07D48">currentLocation</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">currentLocation</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #999999">          </span><span style="color: #A0ADA0">// Get the Percentage (or location) from that CFI</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">currentPage</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">locations</span><span style="color: #999999">.</span><span style="color: #59873A">percentageFromCfi</span><span style="color: #999999">(</span></span>
<span class="line"><span style="color: #393A34">            </span><span style="color: #B07D48">currentLocation</span><span style="color: #999999">.</span><span style="color: #B07D48">start</span><span style="color: #999999">.</span><span style="color: #B07D48">cfi</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #B07D48">current</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">currentPage</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">on</span><span style="color: #999999">(</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">relocated</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">location</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">percent</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">locations</span><span style="color: #999999">.</span><span style="color: #59873A">percentageFromCfi</span><span style="color: #999999">(</span><span style="color: #B07D48">location</span><span style="color: #999999">.</span><span style="color: #B07D48">start</span><span style="color: #999999">.</span><span style="color: #B07D48">cfi</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">percentage</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">Math</span><span style="color: #999999">.</span><span style="color: #59873A">floor</span><span style="color: #999999">(</span><span style="color: #B07D48">percent</span><span style="color: #393A34"> </span><span style="color: #AB5959">*</span><span style="color: #393A34"> </span><span style="color: #2F798A">100</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #B07D48">current</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">percentage</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">change</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">value</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">e</span><span style="color: #999999">.</span><span style="color: #B07D48">target</span><span style="color: #999999">.</span><span style="color: #B07D48">value</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">current</span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">value</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">var</span><span style="color: #393A34"> </span><span style="color: #B07D48">cfi</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">locations</span><span style="color: #999999">.</span><span style="color: #59873A">cfiFromPercentage</span><span style="color: #999999">(</span><span style="color: #B07D48">value</span><span style="color: #393A34"> </span><span style="color: #AB5959">/</span><span style="color: #393A34"> </span><span style="color: #2F798A">100</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">display</span><span style="color: #999999">(</span><span style="color: #B07D48">cfi</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">position: relative</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">getRendition</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">getRendition</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">progress</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">input</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">type</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">number</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">value</span><span style="color: #999999">={</span><span style="color: #B07D48">current</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">min</span><span style="color: #999999">={</span><span style="color: #2F798A">0</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">max</span><span style="color: #999999">={</span><span style="color: #2F798A">100</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">change</span><span style="color: #999999">={</span><span style="color: #B07D48">change</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">/&gt;</span><span style="color: #393A34">%</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">input</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">type</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">range</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">value</span><span style="color: #999999">={</span><span style="color: #B07D48">current</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">min</span><span style="color: #999999">={</span><span style="color: #2F798A">0</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">max</span><span style="color: #999999">={</span><span style="color: #2F798A">100</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">step</span><span style="color: #999999">={</span><span style="color: #2F798A">1</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">change</span><span style="color: #999999">={</span><span style="color: #B07D48">change</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">progress</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">position</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">absolute</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">right</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">left</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">z-index</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">color</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">#</span><span style="color: #A65E2B">000</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">display</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">flex</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">flex-wrap</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">wrap</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">justify-content</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">progress</span><span style="color: #393A34"> </span><span style="color: #AB5959">&gt;</span><span style="color: #393A34"> </span><span style="color: #1E754F">input</span><span style="color: #999999">[</span><span style="color: #B07D48">type</span><span style="color: #AB5959">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">number</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">]</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">text-align</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">progress</span><span style="color: #393A34"> </span><span style="color: #AB5959">&gt;</span><span style="color: #393A34"> </span><span style="color: #1E754F">input</span><span style="color: #999999">[</span><span style="color: #B07D48">type</span><span style="color: #AB5959">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">range</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">]</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">width</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">100</span><span style="color: #AB5959">%</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-17ydqqr"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">current</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">book</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">displayed</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">getRendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">val</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">val</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">book</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">book</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">displayed</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">display</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">ready</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">then</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">()</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        return </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">locations</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">generate</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">1600</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      .</span><span style="color: #82AAFF; font-style: italic">then</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">locations</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA">        </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Wait for book to be rendered to get current page</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #7FDBCA; font-style: italic">displayed</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">then</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">function</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">()</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA">          </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Get the current CFI</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #C792EA">var</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">currentLocation</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">currentLocation</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA">          </span><span style="color: #637777">//</span><span style="color: #637777; font-style: italic"> Get the Percentage (or location) from that CFI</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">currentPage</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">locations</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">percentageFromCfi</span><span style="color: #D6DEEB">(</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">            </span><span style="color: #7FDBCA; font-style: italic">currentLocation</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">start</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">cfi</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #D7DBE0">current</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">currentPage</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">on</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">relocated</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">location</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">percent</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">locations</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">percentageFromCfi</span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">location</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">start</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">cfi</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">percentage</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">Math</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">floor</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">percent</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">*</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #F78C6C">100</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #D7DBE0">current</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">percentage</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">change</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">e</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">value</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">target</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2; font-style: italic">value</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">current</span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">value</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">var</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">cfi</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">locations</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">cfiFromPercentage</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">value</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">/</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #F78C6C">100</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">display</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">cfi</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">position: relative</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">getRendition</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">getRendition</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">progress</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">input</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">type</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">number</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">value</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">current</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">min</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #F78C6C">0</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">max</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #F78C6C">100</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:change=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">change</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">    /&gt;</span><span style="color: #D6DEEB">%</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">input</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">type</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">range</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">value</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">current</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">min</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #F78C6C">0</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">max</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #F78C6C">100</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">step</span><span style="color: #7FDBCA">=</span><span style="color: #D3423E">{</span><span style="color: #F78C6C">1</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:change=</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">change</span><span style="color: #D3423E">}</span></span>
<span class="line"><span style="color: #7FDBCA">    /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">progress</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">position</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">absolute</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">right</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">left</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">z-index</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">color</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">#</span><span style="color: #FFEB95">000</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">display</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">flex</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">flex-wrap</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">wrap</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">justify-content</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">progress</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA">&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF6363">input</span><span style="color: #C792EA">[</span><span style="color: #C5E478; font-style: italic">type</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">number</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">]</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">text-align</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">progress</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA">&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF6363">input</span><span style="color: #C792EA">[</span><span style="color: #C5E478; font-style: italic">type</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">range</span><span style="color: #D9F5DD">&quot;</span><span style="color: #C792EA">]</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">width</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">100</span><span style="color: #FFEB95">%</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-1hcfflj"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div> <div class="svp-code-block--line-number-item">34</div> <div class="svp-code-block--line-number-item">35</div> <div class="svp-code-block--line-number-item">36</div> <div class="svp-code-block--line-number-item">37</div> <div class="svp-code-block--line-number-item">38</div> <div class="svp-code-block--line-number-item">39</div> <div class="svp-code-block--line-number-item">40</div> <div class="svp-code-block--line-number-item">41</div> <div class="svp-code-block--line-number-item">42</div> <div class="svp-code-block--line-number-item">43</div> <div class="svp-code-block--line-number-item">44</div> <div class="svp-code-block--line-number-item">45</div> <div class="svp-code-block--line-number-item">46</div> <div class="svp-code-block--line-number-item">47</div> <div class="svp-code-block--line-number-item">48</div> <div class="svp-code-block--line-number-item">49</div> <div class="svp-code-block--line-number-item">50</div> <div class="svp-code-block--line-number-item">51</div> <div class="svp-code-block--line-number-item">52</div> <div class="svp-code-block--line-number-item">53</div> <div class="svp-code-block--line-number-item">54</div> <div class="svp-code-block--line-number-item">55</div> <div class="svp-code-block--line-number-item">56</div> <div class="svp-code-block--line-number-item">57</div> <div class="svp-code-block--line-number-item">58</div> <div class="svp-code-block--line-number-item">59</div> <div class="svp-code-block--line-number-item">60</div> <div class="svp-code-block--line-number-item">61</div> <div class="svp-code-block--line-number-item">62</div> <div class="svp-code-block--line-number-item">63</div> <div class="svp-code-block--line-number-item">64</div> <div class="svp-code-block--line-number-item">65</div> <div class="svp-code-block--line-number-item">66</div> <div class="svp-code-block--line-number-item">67</div> <div class="svp-code-block--line-number-item">68</div> <div class="svp-code-block--line-number-item">69</div> <div class="svp-code-block--line-number-item">70</div> <div class="svp-code-block--line-number-item">71</div> <div class="svp-code-block--line-number-item">72</div> <div class="svp-code-block--line-number-item">73</div> <div class="svp-code-block--line-number-item">74</div> <div class="svp-code-block--line-number-item">75</div> <div class="svp-code-block--line-number-item">76</div> <div class="svp-code-block--line-number-item">77</div> <div class="svp-code-block--line-number-item">78</div> <div class="svp-code-block--line-number-item">79</div> <div class="svp-code-block--line-number-item">80</div> <div class="svp-code-block--line-number-item">81</div> <div class="svp-code-block--line-number-item">82</div> <div class="svp-code-block--line-number-item">83</div> <div class="svp-code-block--line-number-item">84</div> <div class="svp-code-block--line-number-item">85</div> <div class="svp-code-block--line-number-item">86</div> <div class="svp-code-block--line-number-item">87</div> <div class="svp-code-block--line-number-item">88</div> <div class="svp-code-block--line-number-item">89</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div id="Search-in-the-book" class="svp-anchor-item"></div> <h2 data-svelte-h="svelte-1uar5gy"><a href="#Search-in-the-book" class="svp-title-anchor" aria-label="Search in the book"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>Search in the book</h2> <div class="svp-live-code--container"><div class="svp-live-code--demo"><div style="position: relative"><div style="height: 100vh"><div class="container svelte-f1s7r0"><div class="readerArea svelte-f1s7r0"> <button class="tocButton svelte-f1s7r0" type="button" data-svelte-h="svelte-1nhnnx9"><span class="tocButtonBar svelte-f1s7r0" style="top: 35%"></span> <span class="tocButtonBar svelte-f1s7r0" style="top: 66%"></span></button>   <div class="titleArea svelte-f1s7r0"></div>   <div class="reader svelte-o9nyn5"><div class="viewHolder svelte-o9nyn5"><div id="viewer" style="display:none" class="svelte-o9nyn5"></div> <div> <div class="loadingView svelte-o9nyn5" data-svelte-h="svelte-boy9zg">Loading…</div> </div></div> </div>  <button class="arrow pre svelte-f1s7r0" >‹</button> <button class="arrow next svelte-f1s7r0" >›</button></div>  <div class="tocArea svelte-f1s7r0"></div>  </div></div> <div class="search svelte-11d5m3y"><input value="只在捻花一笑中" type="text" placeholder="search"> <div class="searchResults svelte-11d5m3y"> <div data-svelte-h="svelte-kvb9fj">Empty</div></div></div> </div></div> <div class="c-expansion  svelte-1cjuqpu"><div class="c-expansion--body"> <div class="svp-code-block-wrapper"><div class="svp-code-block--title" data-svelte-h="svelte-16kgxmi">search-book</div> <div class="svp-code-block svp-code-block--with-line-numbers"> <pre class="shiki vitesse-light" style="background-color: #ffffff" tabindex="0" data-svelte-h="svelte-1ugh9xe"><code><span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">SvelteReader</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">svelte-reader</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #1E754F">import</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">base</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #1E754F">from</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">$app/paths</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">null</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">searchText</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">只在捻花一笑中</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">let</span><span style="color: #393A34"> </span><span style="color: #B07D48">searchResults</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">[];</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">search</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #AB5959">async</span><span style="color: #393A34"> </span><span style="color: #999999">()</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #AB5959">!</span><span style="color: #B07D48">searchText</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">searchResults</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">[]);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">res</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #1E754F">await</span><span style="color: #393A34"> </span><span style="color: #59873A">doSearch</span><span style="color: #999999">(</span><span style="color: #B07D48">searchText</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">searchResults</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">res</span><span style="color: #999999">.</span><span style="color: #59873A">slice</span><span style="color: #999999">(</span><span style="color: #2F798A">0</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #2F798A">5</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">doSearch</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">value</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #999999">{</span><span style="color: #393A34"> </span><span style="color: #B07D48">book</span><span style="color: #393A34"> </span><span style="color: #999999">}</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">rendition</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #998418">Promise</span><span style="color: #999999">.</span><span style="color: #59873A">all</span><span style="color: #999999">(</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">spine</span><span style="color: #999999">.</span><span style="color: #B07D48">spineItems</span><span style="color: #999999">.</span><span style="color: #59873A">map</span><span style="color: #999999">((</span><span style="color: #B07D48">item</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #59873A">load</span><span style="color: #999999">(</span><span style="color: #B07D48">book</span><span style="color: #999999">.</span><span style="color: #B07D48">load</span><span style="color: #999999">.</span><span style="color: #59873A">bind</span><span style="color: #999999">(</span><span style="color: #B07D48">book</span><span style="color: #999999">)).</span><span style="color: #59873A">then</span><span style="color: #999999">((</span><span style="color: #B07D48">doc</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #B07D48">res</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #59873A">find</span><span style="color: #999999">(</span><span style="color: #B07D48">value</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #59873A">unload</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">          </span><span style="color: #1E754F">return</span><span style="color: #393A34"> </span><span style="color: #998418">Promise</span><span style="color: #999999">.</span><span style="color: #59873A">resolve</span><span style="color: #999999">(</span><span style="color: #B07D48">res</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">});</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">})</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">).</span><span style="color: #59873A">then</span><span style="color: #999999">((</span><span style="color: #B07D48">res</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #998418">Promise</span><span style="color: #999999">.</span><span style="color: #59873A">resolve</span><span style="color: #999999">([].</span><span style="color: #B07D48">concat</span><span style="color: #999999">.</span><span style="color: #59873A">apply</span><span style="color: #999999">([],</span><span style="color: #393A34"> </span><span style="color: #B07D48">res</span><span style="color: #999999">)));</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #AB5959">const</span><span style="color: #393A34"> </span><span style="color: #59873A">go</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B07D48">href</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">rendition</span><span style="color: #999999">.</span><span style="color: #59873A">display</span><span style="color: #999999">(</span><span style="color: #B07D48">href</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">e</span><span style="color: #999999">.</span><span style="color: #59873A">stopPropagation</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #B07D48">e</span><span style="color: #999999">.</span><span style="color: #59873A">preventDefault</span><span style="color: #999999">();</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">};</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">script</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">position: relative</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">style</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">height: 100vh</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #998418">SvelteReader</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">url</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">base</span><span style="color: #999999">}</span><span style="color: #B56959">/files/啼笑因缘.epub</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">getRendition</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">(</span><span style="color: #B56959">val</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B56959">rendition</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959">val</span><span style="color: #999999">)</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">search</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">input</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">value</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #B56959">searchText</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">input</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">(</span><span style="color: #B56959">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #999999">(</span><span style="color: #B56959">searchText</span><span style="color: #393A34"> </span><span style="color: #AB5959">=</span><span style="color: #393A34"> </span><span style="color: #B56959">e</span><span style="color: #999999">.</span><span style="color: #B56959">target</span><span style="color: #999999">.</span><span style="color: #B56959">value</span><span style="color: #999999">)</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">type</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">text</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #B07D48">placeholder</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">search</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">keyup</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">{</span><span style="color: #999999">(</span><span style="color: #B56959">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #B56959">e</span><span style="color: #999999">.</span><span style="color: #B56959">key</span><span style="color: #393A34"> </span><span style="color: #AB5959">===</span><span style="color: #393A34"> </span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">Enter</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #AB5959">&amp;&amp;</span><span style="color: #393A34"> </span><span style="color: #59873A">search</span><span style="color: #999999">()</span><span style="color: #999999">}</span><span style="color: #B56959AA">&quot;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">/&gt;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">searchResults</span><span style="color: #B56959AA">&quot;</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">{#</span><span style="color: #1E754F">each</span><span style="color: #393A34"> </span><span style="color: #B07D48">searchResults</span><span style="color: #393A34"> </span><span style="color: #1E754F">as</span><span style="color: #393A34"> </span><span style="color: #B07D48">item</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">index</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #393A34"> </span><span style="color: #B07D48">class</span><span style="color: #999999">=</span><span style="color: #B56959AA">&quot;</span><span style="color: #B56959">item</span><span style="color: #B56959AA">&quot;</span><span style="color: #393A34"> </span><span style="color: #1E754F">on</span><span style="color: #999999">:</span><span style="color: #2E808F">click</span><span style="color: #999999">={(</span><span style="color: #B07D48">e</span><span style="color: #999999">)</span><span style="color: #393A34"> </span><span style="color: #999999">=&gt;</span><span style="color: #393A34"> </span><span style="color: #59873A">go</span><span style="color: #999999">(</span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #B07D48">cfi</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B07D48">e</span><span style="color: #999999">)}&gt;</span></span>
<span class="line"><span style="color: #393A34">            </span><span style="color: #999999">{@</span><span style="color: #1E754F">html</span><span style="color: #393A34"> </span><span style="color: #B07D48">item</span><span style="color: #999999">.</span><span style="color: #B07D48">excerpt</span><span style="color: #999999">.</span><span style="color: #59873A">trim</span><span style="color: #999999">().</span><span style="color: #59873A">replace</span><span style="color: #999999">(</span><span style="color: #B07D48">searchText</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #B56959AA">`</span><span style="color: #B56959">&lt;span style=&quot;color: orange&quot;&gt;</span><span style="color: #999999">${</span><span style="color: #B56959">searchText</span><span style="color: #999999">}</span><span style="color: #B56959">&lt;/span&gt;</span><span style="color: #B56959AA">`</span><span style="color: #999999">)}</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">{/</span><span style="color: #1E754F">each</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">{#</span><span style="color: #1E754F">if</span><span style="color: #393A34"> </span><span style="color: #AB5959">!</span><span style="color: #B07D48">searchResults</span><span style="color: #999999">.</span><span style="color: #998418">length</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">        </span><span style="color: #999999">&lt;</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span><span style="color: #393A34">Empty</span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">      </span><span style="color: #999999">{/</span><span style="color: #1E754F">if</span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">div</span><span style="color: #999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999999">&lt;</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">search</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">position</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">absolute</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">right</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">left</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">rem</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">text-align</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">z-index</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">color</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">#</span><span style="color: #A65E2B">000</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">background</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #999999">#</span><span style="color: #A65E2B">fff</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">display</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">flex</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">align-items</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">justify-content</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">center</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">search</span><span style="color: #393A34"> </span><span style="color: #999999">.</span><span style="color: #B07D48">searchResults</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">width</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">200</span><span style="color: #AB5959">px</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">search</span><span style="color: #393A34"> </span><span style="color: #999999">.</span><span style="color: #B07D48">searchResults</span><span style="color: #393A34"> </span><span style="color: #999999">.</span><span style="color: #B07D48">item</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">cursor</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">pointer</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">border-radius</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">4</span><span style="color: #AB5959">px</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">overflow</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">hidden</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">white-space</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">nowrap</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">text-overflow</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #A65E2B">ellipsis</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">border-bottom</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #2F798A">1</span><span style="color: #AB5959">px</span><span style="color: #393A34"> </span><span style="color: #A65E2B">solid</span><span style="color: #393A34"> </span><span style="color: #999999">#</span><span style="color: #A65E2B">000</span><span style="color: #999999">;</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">.</span><span style="color: #B07D48">search</span><span style="color: #393A34"> </span><span style="color: #999999">.</span><span style="color: #B07D48">searchResults</span><span style="color: #393A34"> </span><span style="color: #999999">.</span><span style="color: #B07D48">item</span><span style="color: #999999">:</span><span style="color: #B07D48">hover</span><span style="color: #393A34"> </span><span style="color: #999999">{</span></span>
<span class="line"><span style="color: #393A34">    </span><span style="color: #998418">background</span><span style="color: #999999">:</span><span style="color: #393A34"> </span><span style="color: #998418">rgba</span><span style="color: #999999">(</span><span style="color: #2F798A">0</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #2F798A">0</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #2F798A">0</span><span style="color: #999999">,</span><span style="color: #393A34"> </span><span style="color: #2F798A">0.05</span><span style="color: #999999">);</span></span>
<span class="line"><span style="color: #393A34">  </span><span style="color: #999999">}</span></span>
<span class="line"><span style="color: #999999">&lt;/</span><span style="color: #1E754F">style</span><span style="color: #999999">&gt;</span></span></code></pre>  <pre class="shiki night-owl" style="background-color: #011627" tabindex="0" data-svelte-h="svelte-1g4rxyg"><code><span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { SvelteReader } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">svelte-reader</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA; font-style: italic">import</span><span style="color: #D6DEEB"> { base } </span><span style="color: #C792EA; font-style: italic">from</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$app/paths</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #FF5874; font-style: italic">null</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">searchText</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">只在捻花一笑中</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">let</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">searchResults</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB; font-style: italic"> </span><span style="color: #D6DEEB">[];</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">search</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> async </span><span style="color: #D9F5DD">()</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">if</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">!</span><span style="color: #D7DBE0">searchText</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic"> return </span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">searchResults</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB; font-style: italic"> </span><span style="color: #D6DEEB">[])</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">res</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> await </span><span style="color: #82AAFF; font-style: italic">doSearch</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">searchText</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D7DBE0">searchResults</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">res</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">slice</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">0</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #F78C6C">5</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">doSearch</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">value</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">book</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">}</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">rendition</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    return </span><span style="color: #C5E478; font-style: italic">Promise</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">all</span><span style="color: #D6DEEB">(</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">spine</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">spineItems</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">map</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">item</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        return </span><span style="color: #7FDBCA; font-style: italic">item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">load</span><span style="color: #D6DEEB">(</span><span style="color: #7FDBCA; font-style: italic">book</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">load</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">bind</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">book</span><span style="color: #D6DEEB">))</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">then</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">doc</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">res</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #7FDBCA; font-style: italic">item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">find</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">value</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          </span><span style="color: #7FDBCA; font-style: italic">item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">unload</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">          return </span><span style="color: #C5E478; font-style: italic">Promise</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">resolve</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">res</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">        </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">      </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #D6DEEB">)</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">then</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">res</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C5E478; font-style: italic">Promise</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">resolve</span><span style="color: #D6DEEB">([]</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">concat</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">apply</span><span style="color: #D6DEEB">([]</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0">res</span><span style="color: #D6DEEB">)))</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C792EA">const</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #82AAFF; font-style: italic">go</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0; font-style: italic">href</span><span style="color: #C792EA">,</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #D7DBE0; font-style: italic">e</span><span style="color: #D9F5DD">)</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C792EA">{</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">rendition</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">display</span><span style="color: #D6DEEB">(</span><span style="color: #D7DBE0">href</span><span style="color: #D6DEEB">)</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">stopPropagation</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">    </span><span style="color: #7FDBCA; font-style: italic">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">preventDefault</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA">;</span></span>
<span class="line"><span style="color: #C792EA; font-style: italic">  </span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">script</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">position: relative</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">style</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">height: 100vh</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #C5E478">SvelteReader</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">url</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">base</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">/files/啼笑因缘.epub</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">getRendition</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0">val</span><span style="color: #D9F5DD">)</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #ECC48D"> </span><span style="color: #D6DEEB">(rendition</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=</span><span style="color: #ECC48D"> </span><span style="color: #D6DEEB">val)</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">search</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">input</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">value</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D6DEEB">searchText</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:input=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0">e</span><span style="color: #D9F5DD">)</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #ECC48D"> </span><span style="color: #D6DEEB">(searchText</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=</span><span style="color: #ECC48D"> </span><span style="color: #D6DEEB">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">target</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">value</span><span style="color: #D6DEEB">)</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">type</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">text</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C5E478; font-style: italic">placeholder</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">search</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">      </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:keyup=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0">e</span><span style="color: #D9F5DD">)</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #ECC48D"> </span><span style="color: #D6DEEB">e</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">key</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">===</span><span style="color: #ECC48D"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">Enter</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D"> </span><span style="color: #C792EA">&amp;&amp;</span><span style="color: #ECC48D"> </span><span style="color: #82AAFF; font-style: italic">search</span><span style="color: #D6DEEB">()</span><span style="color: #D3423E">}</span><span style="color: #D9F5DD">&quot;</span></span>
<span class="line"><span style="color: #7FDBCA">    /&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">searchResults</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">      {#</span><span style="color: #C792EA; font-style: italic">each</span><span style="color: #D6DEEB"> searchResults </span><span style="color: #C792EA; font-style: italic">as</span><span style="color: #D6DEEB"> item, index}</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA"> </span><span style="color: #C5E478; font-style: italic">class</span><span style="color: #7FDBCA">=</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">item</span><span style="color: #D9F5DD">&quot;</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA; font-style: italic">on</span><span style="color: #7FDBCA">:click=</span><span style="color: #D3423E">{</span><span style="color: #D9F5DD">(</span><span style="color: #D7DBE0">e</span><span style="color: #D9F5DD">)</span><span style="color: #7FDBCA"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #7FDBCA"> </span><span style="color: #82AAFF; font-style: italic">go</span><span style="color: #D6DEEB">(item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #BAEBE2">cfi</span><span style="color: #7FDBCA">, </span><span style="color: #D6DEEB">e)</span><span style="color: #D3423E">}</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">            {@</span><span style="color: #C792EA">html</span><span style="color: #D6DEEB"> item</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #FAF39F; font-style: italic">excerpt</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">trim</span><span style="color: #D6DEEB">()</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #82AAFF; font-style: italic">replace</span><span style="color: #D6DEEB">(searchText, </span><span style="color: #D6DEEB">`</span><span style="color: #ECC48D">&lt;span style=&quot;color: orange&quot;&gt;</span><span style="color: #D3423E">${</span><span style="color: #D6DEEB">searchText</span><span style="color: #D3423E">}</span><span style="color: #ECC48D">&lt;/span&gt;</span><span style="color: #D6DEEB">`</span><span style="color: #D6DEEB">)}</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">      {/</span><span style="color: #C792EA; font-style: italic">each</span><span style="color: #D6DEEB">}</span></span>
<span class="line"><span style="color: #D6DEEB">      {#</span><span style="color: #C792EA; font-style: italic">if</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">!</span><span style="color: #D6DEEB">searchResults</span><span style="color: #C792EA; font-style: italic">.</span><span style="color: #7FDBCA">length</span><span style="color: #D6DEEB">}</span></span>
<span class="line"><span style="color: #D6DEEB">        </span><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span><span style="color: #D6DEEB">Empty</span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">      {/</span><span style="color: #C792EA; font-style: italic">if</span><span style="color: #D6DEEB">}</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">div</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7FDBCA">&lt;</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">search</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">position</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">absolute</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">right</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">left</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">rem</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">text-align</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">z-index</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">color</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">#</span><span style="color: #FFEB95">000</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">background</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">#</span><span style="color: #FFEB95">fff</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">display</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">flex</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">align-items</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">justify-content</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">center</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">search</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">searchResults</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">width</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">200</span><span style="color: #FFEB95">px</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">search</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">searchResults</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">item</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">cursor</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">pointer</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">border-radius</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">4</span><span style="color: #FFEB95">px</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">overflow</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">hidden</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">white-space</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">nowrap</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">text-overflow</span><span style="color: #D6DEEB">: </span><span style="color: #FF6363">ellipsis</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">border-bottom</span><span style="color: #D6DEEB">: </span><span style="color: #F78C6C">1</span><span style="color: #FFEB95">px</span><span style="color: #D6DEEB"> </span><span style="color: #FF6363">solid</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">#</span><span style="color: #FFEB95">000</span><span style="color: #D6DEEB">;</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D6DEEB">  </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">search</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">searchResults</span><span style="color: #C792EA; font-style: italic"> </span><span style="color: #C5E478">.</span><span style="color: #C5E478; font-style: italic">item</span><span style="color: #C5E478">:</span><span style="color: #C5E478; font-style: italic">hover</span><span style="color: #D6DEEB"> {</span></span>
<span class="line"><span style="color: #D6DEEB">    </span><span style="color: #80CBC4">background</span><span style="color: #D6DEEB">: </span><span style="color: #C5E478">rgba</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">0.05</span><span style="color: #D6DEEB">);</span></span>
<span class="line"><span style="color: #D6DEEB">  }</span></span>
<span class="line"><span style="color: #7FDBCA">&lt;/</span><span style="color: #CAECE6">style</span><span style="color: #7FDBCA">&gt;</span></span></code></pre> <div class="svp-code-block--lang" data-svelte-h="svelte-xa0fuv">svelte</div> <div class="svp-code-bock--copy-code" role="button" tabindex="0" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.024 3.75c0-.966.784-1.75 1.75-1.75H20.25c.966 0 1.75.784 1.75 1.75v11.498a1.75 1.75 0 0 1-1.75 1.75H8.774a1.75 1.75 0 0 1-1.75-1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.498c0 .139.112.25.25.25H20.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25Z"></path><path fill="currentColor" d="M1.995 10.749a1.75 1.75 0 0 1 1.75-1.751H5.25a.75.75 0 1 1 0 1.5H3.745a.25.25 0 0 0-.25.25L3.5 20.25c0 .138.111.25.25.25h9.5a.25.25 0 0 0 .25-.25v-1.51a.75.75 0 1 1 1.5 0v1.51A1.75 1.75 0 0 1 13.25 22h-9.5A1.75 1.75 0 0 1 2 20.25l-.005-9.501Z"></path></svg></div> <div class="svp-code-block--line-numbers" data-svelte-h="svelte-y0vhc1"><div class="svp-code-block--line-number-item">1</div> <div class="svp-code-block--line-number-item">2</div> <div class="svp-code-block--line-number-item">3</div> <div class="svp-code-block--line-number-item">4</div> <div class="svp-code-block--line-number-item">5</div> <div class="svp-code-block--line-number-item">6</div> <div class="svp-code-block--line-number-item">7</div> <div class="svp-code-block--line-number-item">8</div> <div class="svp-code-block--line-number-item">9</div> <div class="svp-code-block--line-number-item">10</div> <div class="svp-code-block--line-number-item">11</div> <div class="svp-code-block--line-number-item">12</div> <div class="svp-code-block--line-number-item">13</div> <div class="svp-code-block--line-number-item">14</div> <div class="svp-code-block--line-number-item">15</div> <div class="svp-code-block--line-number-item">16</div> <div class="svp-code-block--line-number-item">17</div> <div class="svp-code-block--line-number-item">18</div> <div class="svp-code-block--line-number-item">19</div> <div class="svp-code-block--line-number-item">20</div> <div class="svp-code-block--line-number-item">21</div> <div class="svp-code-block--line-number-item">22</div> <div class="svp-code-block--line-number-item">23</div> <div class="svp-code-block--line-number-item">24</div> <div class="svp-code-block--line-number-item">25</div> <div class="svp-code-block--line-number-item">26</div> <div class="svp-code-block--line-number-item">27</div> <div class="svp-code-block--line-number-item">28</div> <div class="svp-code-block--line-number-item">29</div> <div class="svp-code-block--line-number-item">30</div> <div class="svp-code-block--line-number-item">31</div> <div class="svp-code-block--line-number-item">32</div> <div class="svp-code-block--line-number-item">33</div> <div class="svp-code-block--line-number-item">34</div> <div class="svp-code-block--line-number-item">35</div> <div class="svp-code-block--line-number-item">36</div> <div class="svp-code-block--line-number-item">37</div> <div class="svp-code-block--line-number-item">38</div> <div class="svp-code-block--line-number-item">39</div> <div class="svp-code-block--line-number-item">40</div> <div class="svp-code-block--line-number-item">41</div> <div class="svp-code-block--line-number-item">42</div> <div class="svp-code-block--line-number-item">43</div> <div class="svp-code-block--line-number-item">44</div> <div class="svp-code-block--line-number-item">45</div> <div class="svp-code-block--line-number-item">46</div> <div class="svp-code-block--line-number-item">47</div> <div class="svp-code-block--line-number-item">48</div> <div class="svp-code-block--line-number-item">49</div> <div class="svp-code-block--line-number-item">50</div> <div class="svp-code-block--line-number-item">51</div> <div class="svp-code-block--line-number-item">52</div> <div class="svp-code-block--line-number-item">53</div> <div class="svp-code-block--line-number-item">54</div> <div class="svp-code-block--line-number-item">55</div> <div class="svp-code-block--line-number-item">56</div> <div class="svp-code-block--line-number-item">57</div> <div class="svp-code-block--line-number-item">58</div> <div class="svp-code-block--line-number-item">59</div> <div class="svp-code-block--line-number-item">60</div> <div class="svp-code-block--line-number-item">61</div> <div class="svp-code-block--line-number-item">62</div> <div class="svp-code-block--line-number-item">63</div> <div class="svp-code-block--line-number-item">64</div> <div class="svp-code-block--line-number-item">65</div> <div class="svp-code-block--line-number-item">66</div> <div class="svp-code-block--line-number-item">67</div> <div class="svp-code-block--line-number-item">68</div> <div class="svp-code-block--line-number-item">69</div> <div class="svp-code-block--line-number-item">70</div> <div class="svp-code-block--line-number-item">71</div> <div class="svp-code-block--line-number-item">72</div> <div class="svp-code-block--line-number-item">73</div> <div class="svp-code-block--line-number-item">74</div> <div class="svp-code-block--line-number-item">75</div> <div class="svp-code-block--line-number-item">76</div> <div class="svp-code-block--line-number-item">77</div> <div class="svp-code-block--line-number-item">78</div> <div class="svp-code-block--line-number-item">79</div> <div class="svp-code-block--line-number-item">80</div> <div class="svp-code-block--line-number-item">81</div> <div class="svp-code-block--line-number-item">82</div> <div class="svp-code-block--line-number-item">83</div> <div class="svp-code-block--line-number-item">84</div> <div class="svp-code-block--line-number-item">85</div> <div class="svp-code-block--line-number-item">86</div> <div class="svp-code-block--line-number-item">87</div> <div class="svp-code-block--line-number-item">88</div> <div class="svp-code-block--line-number-item">89</div> <div class="svp-code-block--line-number-item">90</div> <div class="svp-code-block--line-number-item">91</div> <div class="svp-code-block--line-number-item">92</div> <div class="svp-code-block--line-number-item">93</div> <div class="svp-code-block--line-number-item">94</div></div></div></div></div>  <div class="c-expansion--header svelte-1cjuqpu" style="" role="button" tabindex="0"><div class="c-expansion--header-left svelte-1cjuqpu"><div class="c-expansion--icon svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M26.1 5.7C23.5 2 18.4.9 14.7 3.2L8.2 7.4c-1.8 1.1-3 2.9-3.4 5c-.3 1.7 0 3.5.8 5.1c-.6.8-.9 1.8-1.1 2.8c-.4 2.1.1 4.3 1.4 6c2.6 3.7 7.7 4.8 11.4 2.5l6.5-4.2c1.8-1.1 3-2.9 3.4-5c.3-1.7 0-3.5-.8-5.1c.6-.8.9-1.8 1.1-2.8c.4-2.1-.1-4.3-1.4-6zM24.3 11c0 .2-.1.4-.2.6l-.1.4l-.3-.2c-.8-.6-1.6-1-2.6-1.3l-.2-.1v-.2c0-.3-.1-.7-.3-1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2L12 12.9c-.3.2-.5.5-.6.9c-.1.4 0 .8.2 1.1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2l2.5-1.6c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1 1 2.4.8 3.6c-.2 1.2-1 2.3-2 3L15.4 26c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.7-1-1-2.4-.8-3.6c0-.2.1-.4.2-.6L8 20l.3.2c.8.6 1.6 1 2.6 1.3l.2.1v.2c0 .3.1.7.3 1c.4.5 1 .8 1.7.6c.1 0 .3-.1.4-.2L20 19c.3-.2.5-.5.6-.9c.1-.4 0-.8-.2-1.1c-.4-.5-1-.8-1.7-.6c-.1 0-.3.1-.4.2l-2.5 1.6c-.4.3-.9.5-1.3.6c-2.1.5-4.3-.3-5.6-2.1c-.8-1-1-2.4-.8-3.6c.2-1.2 1-2.3 2-3l6.5-4.2c.4-.3.9-.5 1.3-.6c2.1-.5 4.3.3 5.6 2.1c.7 1.1 1 2.4.8 3.6z"></path></svg> </div> <div class="c-expansion--title svelte-1cjuqpu">  Click fold/expand code </div></div> <div class="c-expansion--arrow  svelte-1cjuqpu">  <svg width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"></path></svg> </div></div>  </div></div> <div class="meta svelte-1jx2zng without-edit-link"> <div class="last-update svelte-1mlgib2">Last update at: 2023/07/25 17:21:11</div></div> </div></div>  <div class="toc svelte-1ulaavb collapsed"><div class="title svelte-1ulaavb">On this page</div> <div class="anchors svelte-1ulaavb" style="--bar-top: calc(0em);"> <a href="#Svelte-Reader---an-easy-way-to-embed-a-ePub-into-your-webapp" class="item svelte-1ulaavb active" style="--heading-depth: 1;">Svelte Reader - an easy way to embed a ePub into your webapp </a> <a href="#Basic-usage" class="item svelte-1ulaavb" style="--heading-depth: 2;">Basic usage </a> <a href="#SvelteReader-Attributes" class="item svelte-1ulaavb" style="--heading-depth: 2;">SvelteReader Attributes </a> <a href="#SvelteReader-Slots" class="item svelte-1ulaavb" style="--heading-depth: 2;">SvelteReader Slots </a> <a href="#SvelteReader-props-passed-to-inner-EpubView" class="item svelte-1ulaavb" style="--heading-depth: 2;">SvelteReader props passed to inner EpubView </a> <a href="#EpubView-Attributes" class="item svelte-1ulaavb" style="--heading-depth: 2;">EpubView Attributes </a> <a href="#EpubView-Events" class="item svelte-1ulaavb" style="--heading-depth: 2;">EpubView Events </a> <a href="#EpubView--Slots" class="item svelte-1ulaavb" style="--heading-depth: 2;">EpubView  Slots </a> <a href="#EpubView-Exposes" class="item svelte-1ulaavb" style="--heading-depth: 2;">EpubView Exposes </a> <a href="#Recipes-and-tips" class="item svelte-1ulaavb" style="--heading-depth: 2;">Recipes and tips </a> <a href="#Save-and-retrieve-progress-from-storage" class="item svelte-1ulaavb" style="--heading-depth: 2;">Save and retrieve progress from storage </a> <a href="#Display-page-number-for-current-chapter" class="item svelte-1ulaavb" style="--heading-depth: 2;">Display page number for current chapter </a> <a href="#Change-font-size" class="item svelte-1ulaavb" style="--heading-depth: 2;">Change font-size </a> <a href="#Add---adjust-custom-css-for-the-epub-html" class="item svelte-1ulaavb" style="--heading-depth: 2;">Add / adjust custom css for the epub-html </a> <a href="#Hightlight-selection-in-epub" class="item svelte-1ulaavb" style="--heading-depth: 2;">Hightlight selection in epub </a> <a href="#Handling-missing-mime-types-on-server" class="item svelte-1ulaavb" style="--heading-depth: 2;">Handling missing mime-types on server </a> <a href="#Display-a-scrolled-epub-view" class="item svelte-1ulaavb" style="--heading-depth: 2;">Display a scrolled epub-view </a> <a href="#Enable-opening-links---running-scripts-inside-epubjs-iframe" class="item svelte-1ulaavb" style="--heading-depth: 2;">Enable opening links / running scripts inside epubjs iframe </a> <a href="#Speak-the-text" class="item svelte-1ulaavb" style="--heading-depth: 2;">Speak the text </a> <a href="#Get-book-information" class="item svelte-1ulaavb" style="--heading-depth: 2;">Get book information </a> <a href="#Import-file" class="item svelte-1ulaavb" style="--heading-depth: 2;">Import file </a> <a href="#Current-progress" class="item svelte-1ulaavb" style="--heading-depth: 2;">Current progress </a> <a href="#Search-in-the-book" class="item svelte-1ulaavb" style="--heading-depth: 2;">Search in the book </a> <div class="active-bar svelte-1ulaavb"></div></div></div> <div class="backdrop svelte-112ytuk" role="none" style="z-index: 900;"></div>  </main> 
			
			<script>
				{
					__sveltekit_730se3 = {
						assets: "/svelte-reader-docs",
						base: new URL("..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../_app/immutable/entry/start.3cc09048.js"),
						import("../_app/immutable/entry/app.00eba1c1.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
